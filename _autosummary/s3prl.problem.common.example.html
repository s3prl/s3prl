<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="hear_beijing_opera" href="s3prl.problem.common.hear_beijing_opera.html" /><link rel="prev" title="common" href="s3prl.problem.common.html" />

    <!-- Generated with Sphinx 5.1.1 and Furo 2023.03.27 -->
        <title>example - S3PRL 0.4.18 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=fad236701ea90a88636c2a8c73b44ae642ed2a53" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">S3PRL 0.4.18
 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">S3PRL 0.4.18
 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/installation.html">Install S3PRL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/upstream_collection.html">S3PRL Upstream Collection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/problem.html">Use Problem module to run customizable recipes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">How to Contribute</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contribute/general.html">General Guideline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute/upstream.html">Adding New Upstream</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Documentation</span></p>
<ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="s3prl.nn.html">nn</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="s3prl.nn.beam_decoder.html">beam_decoder</a></li>
<li class="toctree-l2"><a class="reference internal" href="s3prl.nn.common.html">common</a></li>
<li class="toctree-l2"><a class="reference internal" href="s3prl.nn.hear.html">hear</a></li>
<li class="toctree-l2"><a class="reference internal" href="s3prl.nn.interface.html">interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="s3prl.nn.linear.html">linear</a></li>
<li class="toctree-l2"><a class="reference internal" href="s3prl.nn.pit.html">pit</a></li>
<li class="toctree-l2"><a class="reference internal" href="s3prl.nn.pooling.html">pooling</a></li>
<li class="toctree-l2"><a class="reference internal" href="s3prl.nn.rnn.html">rnn</a></li>
<li class="toctree-l2"><a class="reference internal" href="s3prl.nn.speaker_loss.html">speaker_loss</a></li>
<li class="toctree-l2"><a class="reference internal" href="s3prl.nn.speaker_model.html">speaker_model</a></li>
<li class="toctree-l2"><a class="reference internal" href="s3prl.nn.specaug.html">specaug</a></li>
<li class="toctree-l2"><a class="reference internal" href="s3prl.nn.upstream.html">upstream</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="s3prl.problem.html">problem</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="s3prl.problem.asr.html">asr</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="s3prl.problem.asr.run.html">run</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.problem.asr.superb_asr.html">superb_asr</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.problem.asr.superb_pr.html">superb_pr</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.problem.asr.superb_sf.html">superb_sf</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="s3prl.problem.asv.html">asv</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="s3prl.problem.asv.run.html">run</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.problem.asv.superb_asv.html">superb_asv</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="s3prl.problem.base.html">base</a></li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="s3prl.problem.common.html">common</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">example</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.problem.common.hear_beijing_opera.html">hear_beijing_opera</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.problem.common.hear_cremad.html">hear_cremad</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.problem.common.hear_dcase_2016_task2.html">hear_dcase_2016_task2</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.problem.common.hear_esc50.html">hear_esc50</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.problem.common.hear_fsd.html">hear_fsd</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.problem.common.hear_gsc5hr.html">hear_gsc5hr</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.problem.common.hear_gtzan.html">hear_gtzan</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.problem.common.hear_gtzan_music_speech.html">hear_gtzan_music_speech</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.problem.common.hear_gunshot.html">hear_gunshot</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.problem.common.hear_libricount.html">hear_libricount</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.problem.common.hear_maestro.html">hear_maestro</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.problem.common.hear_nsynth5hr.html">hear_nsynth5hr</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.problem.common.hear_stroke.html">hear_stroke</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.problem.common.hear_tonic.html">hear_tonic</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.problem.common.hear_vocal.html">hear_vocal</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.problem.common.hear_vox_lingual.html">hear_vox_lingual</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.problem.common.run.html">run</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.problem.common.superb_er.html">superb_er</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.problem.common.superb_ic.html">superb_ic</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.problem.common.superb_ks.html">superb_ks</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.problem.common.superb_sid.html">superb_sid</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="s3prl.problem.diarization.html">diarization</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="s3prl.problem.diarization.run.html">run</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.problem.diarization.superb_sd.html">superb_sd</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.problem.diarization.util.html">util</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="s3prl.task.html">task</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="s3prl.task.base.html">base</a></li>
<li class="toctree-l2"><a class="reference internal" href="s3prl.task.diarization.html">diarization</a></li>
<li class="toctree-l2"><a class="reference internal" href="s3prl.task.dump_feature.html">dump_feature</a></li>
<li class="toctree-l2"><a class="reference internal" href="s3prl.task.event_prediction.html">event_prediction</a></li>
<li class="toctree-l2"><a class="reference internal" href="s3prl.task.scene_prediction.html">scene_prediction</a></li>
<li class="toctree-l2"><a class="reference internal" href="s3prl.task.speaker_verification_task.html">speaker_verification_task</a></li>
<li class="toctree-l2"><a class="reference internal" href="s3prl.task.speech2text_ctc_task.html">speech2text_ctc_task</a></li>
<li class="toctree-l2"><a class="reference internal" href="s3prl.task.utterance_classification_task.html">utterance_classification_task</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="s3prl.dataio.html">dataio</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="s3prl.dataio.collate_fn.html">collate_fn</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="s3prl.dataio.corpus.html">corpus</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="s3prl.dataio.corpus.base.html">base</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.dataio.corpus.fluent_speech_commands.html">fluent_speech_commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.dataio.corpus.iemocap.html">iemocap</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.dataio.corpus.librilight.html">librilight</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.dataio.corpus.librispeech.html">librispeech</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.dataio.corpus.quesst14.html">quesst14</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.dataio.corpus.snips.html">snips</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.dataio.corpus.speech_commands.html">speech_commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.dataio.corpus.voxceleb1sid.html">voxceleb1sid</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.dataio.corpus.voxceleb1sv.html">voxceleb1sv</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="s3prl.dataio.dataset.html">dataset</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="s3prl.dataio.dataset.base.html">base</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.dataio.dataset.diarization.html">diarization</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.dataio.dataset.encode.html">encode</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.dataio.dataset.frame_label.html">frame_label</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.dataio.dataset.load_audio.html">load_audio</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.dataio.dataset.util.html">util</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="s3prl.dataio.encoder.html">encoder</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="s3prl.dataio.encoder.category.html">category</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.dataio.encoder.g2p.html">g2p</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.dataio.encoder.tokenizer.html">tokenizer</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.dataio.encoder.vocabulary.html">vocabulary</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="s3prl.dataio.sampler.html">sampler</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="s3prl.dataio.sampler.balanced_weighted_sampler.html">balanced_weighted_sampler</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.dataio.sampler.distributed_sampler.html">distributed_sampler</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.dataio.sampler.fixed_batch_size_batch_sampler.html">fixed_batch_size_batch_sampler</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.dataio.sampler.group_same_item_sampler.html">group_same_item_sampler</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.dataio.sampler.max_timestamp_batch_sampler.html">max_timestamp_batch_sampler</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3prl.dataio.sampler.sorted_sampler.html">sorted_sampler</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="s3prl.metric.html">metric</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="s3prl.metric.common.html">common</a></li>
<li class="toctree-l2"><a class="reference internal" href="s3prl.metric.diarization.html">diarization</a></li>
<li class="toctree-l2"><a class="reference internal" href="s3prl.metric.slot_filling.html">slot_filling</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="s3prl.util.html">util</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="s3prl.util.audio_info.html">audio_info</a></li>
<li class="toctree-l2"><a class="reference internal" href="s3prl.util.benchmark.html">benchmark</a></li>
<li class="toctree-l2"><a class="reference internal" href="s3prl.util.download.html">download</a></li>
<li class="toctree-l2"><a class="reference internal" href="s3prl.util.override.html">override</a></li>
<li class="toctree-l2"><a class="reference internal" href="s3prl.util.pseudo_data.html">pseudo_data</a></li>
<li class="toctree-l2"><a class="reference internal" href="s3prl.util.seed.html">seed</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="example">
<h1>example<a class="headerlink" href="#example" title="Permalink to this heading">#</a></h1>
<p><strong>(s3prl.problem.common.example)</strong></p>
<span class="target" id="module-s3prl.problem.common.example"></span><section id="commonexample">
<h2>CommonExample<a class="headerlink" href="#commonexample" title="Permalink to this heading">#</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="s3prl.problem.common.example.CommonExample">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">s3prl.problem.common.example.</span></span><span class="sig-name descname"><span class="pre">CommonExample</span></span><a class="reference internal" href="../_modules/s3prl/problem/common/example.html#CommonExample"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/common/example.py#L12-L58"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.CommonExample" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="s3prl.problem.common.superb_sid.html#s3prl.problem.common.superb_sid.SuperbSID" title="s3prl.problem.common.superb_sid.SuperbSID"><code class="xref py py-class docutils literal notranslate"><span class="pre">SuperbSID</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.CommonExample.default_config">
<span class="sig-name descname"><span class="pre">default_config</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../_modules/s3prl/problem/common/example.html#CommonExample.default_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/common/example.py#L13-L27"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.CommonExample.default_config" title="Permalink to this definition">#</a></dt>
<dd><p>The default arguments for <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.run" title="s3prl.problem.common.example.CommonExample.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a> in yaml.
Note that for the fields with inner values, like <code class="code docutils literal notranslate"><span class="pre">build_model</span></code>,
the outer field name corresponds to a method name, so you can find the method
<a class="reference internal" href="#s3prl.problem.common.example.CommonExample.build_model" title="s3prl.problem.common.example.CommonExample.build_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_model</span></code></a>. Furthermore, the values inside that field will be
directly passed into the method. So by changing these inner values, you
can directly affect the behavior of the corresponding method. See the method
documentation for all the supported arguments and their meanings.</p>
<p>The methods affected by the following config are: <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.prepare_data" title="s3prl.problem.common.example.CommonExample.prepare_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prepare_data</span></code></a> <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.build_encoder" title="s3prl.problem.common.example.CommonExample.build_encoder"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_encoder</span></code></a> <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.build_dataset" title="s3prl.problem.common.example.CommonExample.build_dataset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_dataset</span></code></a> <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.build_batch_sampler" title="s3prl.problem.common.example.CommonExample.build_batch_sampler"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_batch_sampler</span></code></a> <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.build_upstream" title="s3prl.problem.common.example.CommonExample.build_upstream"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_upstream</span></code></a> <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.build_featurizer" title="s3prl.problem.common.example.CommonExample.build_featurizer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_featurizer</span></code></a> <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.build_downstream" title="s3prl.problem.common.example.CommonExample.build_downstream"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_downstream</span></code></a> <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.build_model" title="s3prl.problem.common.example.CommonExample.build_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_model</span></code></a> <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.build_task" title="s3prl.problem.common.example.CommonExample.build_task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_task</span></code></a> <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.build_optimizer" title="s3prl.problem.common.example.CommonExample.build_optimizer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_optimizer</span></code></a> <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.build_scheduler" title="s3prl.problem.common.example.CommonExample.build_scheduler"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_scheduler</span></code></a> <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.save_model" title="s3prl.problem.common.example.CommonExample.save_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">save_model</span></code></a> <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.save_task" title="s3prl.problem.common.example.CommonExample.save_task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">save_task</span></code></a> <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.train" title="s3prl.problem.common.example.CommonExample.train"><code class="xref py py-obj docutils literal notranslate"><span class="pre">train</span></code></a> <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.evaluate" title="s3prl.problem.common.example.CommonExample.evaluate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">evaluate</span></code></a></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">start</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="nt">stop</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="nt">target_dir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">???</span>
<span class="nt">cache_dir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="nt">remove_all_cache</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">prepare_data</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="nt">build_encoder</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="nt">build_dataset</span><span class="p">:</span>
<span class="w">  </span><span class="nt">train</span><span class="p">:</span>
<span class="w">    </span><span class="nt">max_secs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8.0</span>
<span class="nt">build_batch_sampler</span><span class="p">:</span>
<span class="w">  </span><span class="nt">train</span><span class="p">:</span>
<span class="w">    </span><span class="nt">batch_size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8</span>
<span class="w">    </span><span class="nt">shuffle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">valid</span><span class="p">:</span>
<span class="w">    </span><span class="nt">batch_size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="nt">test</span><span class="p">:</span>
<span class="w">    </span><span class="nt">batch_size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="nt">build_upstream</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">???</span>
<span class="nt">build_featurizer</span><span class="p">:</span>
<span class="w">  </span><span class="nt">layer_selections</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">normalize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">build_downstream</span><span class="p">:</span>
<span class="w">  </span><span class="nt">hidden_size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">256</span>
<span class="nt">build_model</span><span class="p">:</span>
<span class="w">  </span><span class="nt">upstream_trainable</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">build_task</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="nt">build_optimizer</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Adam</span>
<span class="w">  </span><span class="nt">conf</span><span class="p">:</span>
<span class="w">    </span><span class="nt">lr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0001</span>
<span class="nt">build_scheduler</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ExponentialLR</span>
<span class="w">  </span><span class="nt">gamma</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.9</span>
<span class="nt">save_model</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="nt">save_task</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="nt">train</span><span class="p">:</span>
<span class="w">  </span><span class="nt">total_steps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">  </span><span class="nt">log_step</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="nt">eval_step</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">  </span><span class="nt">save_step</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">  </span><span class="nt">gradient_clipping</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
<span class="w">  </span><span class="nt">gradient_accumulate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="nt">valid_metric</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">accuracy</span>
<span class="w">  </span><span class="nt">valid_higher_better</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">auto_resume</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">evaluate</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.CommonExample.prepare_data">
<span class="sig-name descname"><span class="pre">prepare_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prepare_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">get_path_only</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/s3prl/problem/common/example.html#CommonExample.prepare_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/common/example.py#L29-L58"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.CommonExample.prepare_data" title="Permalink to this definition">#</a></dt>
<dd><p>Prepare the task-specific data metadata (path, labels…).
By default call <code class="xref py py-obj docutils literal notranslate"><span class="pre">voxceleb1_for_sid</span></code> with <code class="code docutils literal notranslate"><span class="pre">**prepare_data</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prepare_data</strong> (<em>dict</em>) – same in <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.default_config" title="s3prl.problem.common.example.CommonExample.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a>, support arguments in <code class="xref py py-obj docutils literal notranslate"><span class="pre">voxceleb1_for_sid</span></code></p></li>
<li><p><strong>target_dir</strong> (<em>str</em>) – Parse your corpus and save the csv file into this directory</p></li>
<li><p><strong>cache_dir</strong> (<em>str</em>) – If the parsing or preprocessing takes too long time, you can save
the temporary files into this directory. This directory is expected to be shared
across different training sessions (different hypers and <code class="code docutils literal notranslate"><span class="pre">target_dir</span></code>)</p></li>
<li><p><strong>get_path_only</strong> (<em>str</em>) – Directly return the filepaths no matter they exist or not.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>tuple</p>
<ol class="arabic simple">
<li><p>train_path (str)</p></li>
<li><p>valid_path (str)</p></li>
<li><p>test_paths (List[str])</p></li>
</ol>
<p>Each path (str) should be a csv file containing the following columns:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>column</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>id</p></td>
<td><p>(str) - the unique id for this data point</p></td>
</tr>
<tr class="row-odd"><td><p>wav_path</p></td>
<td><p>(str) - the absolute path of the waveform file</p></td>
</tr>
<tr class="row-even"><td><p>label</p></td>
<td><p>(str) - a string label of the waveform</p></td>
</tr>
<tr class="row-odd"><td><p>start_sec</p></td>
<td><p>(float) - optional, load the waveform from <code class="code docutils literal notranslate"><span class="pre">start_sec</span></code> seconds. If not presented or is <code class="code docutils literal notranslate"><span class="pre">math.nan</span></code>, load from the beginning.</p></td>
</tr>
<tr class="row-even"><td><p>end_sec</p></td>
<td><p>(float) - optional, load the waveform from <code class="code docutils literal notranslate"><span class="pre">end_sec</span></code> seconds. If not presented or is <code class="code docutils literal notranslate"><span class="pre">math.nan</span></code>, load to the end.</p></td>
</tr>
</tbody>
</table>
</div>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.CommonExample.build_batch_sampler">
<span class="sig-name descname"><span class="pre">build_batch_sampler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">build_batch_sampler</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_csv</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/common/superb_sid.py#L360-L411"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.CommonExample.build_batch_sampler" title="Permalink to this definition">#</a></dt>
<dd><p>Return the batch sampler for torch DataLoader.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>build_batch_sampler</strong> (<em>dict</em>) – <p>same in <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.default_config" title="s3prl.problem.common.example.CommonExample.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a></p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>key</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>train</p></td>
<td><p>(dict) - arguments for <code class="xref py py-obj docutils literal notranslate"><span class="pre">FixedBatchSizeBatchSampler</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>valid</p></td>
<td><p>(dict) - arguments for <code class="xref py py-obj docutils literal notranslate"><span class="pre">FixedBatchSizeBatchSampler</span></code></p></td>
</tr>
<tr class="row-even"><td><p>test</p></td>
<td><p>(dict) - arguments for <code class="xref py py-obj docutils literal notranslate"><span class="pre">FixedBatchSizeBatchSampler</span></code></p></td>
</tr>
</tbody>
</table>
</div>
</p></li>
<li><p><strong>target_dir</strong> (<em>str</em>) – Current experiment directory</p></li>
<li><p><strong>cache_dir</strong> (<em>str</em>) – If the preprocessing takes too long time, save
the temporary files into this directory. This directory is expected to be shared
across different training sessions (different hypers and <code class="code docutils literal notranslate"><span class="pre">target_dir</span></code>)</p></li>
<li><p><strong>mode</strong> (<em>str</em>) – train/valid/test</p></li>
<li><p><strong>data_csv</strong> (<em>str</em>) – the <code class="code docutils literal notranslate"><span class="pre">mode</span></code> specific csv from <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.prepare_data" title="s3prl.problem.common.example.CommonExample.prepare_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prepare_data</span></code></a></p></li>
<li><p><strong>dataset</strong> – the dataset from <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.build_dataset" title="s3prl.problem.common.example.CommonExample.build_dataset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_dataset</span></code></a></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>batch sampler for torch DataLoader</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.CommonExample.build_collate_fn">
<span class="sig-name descname"><span class="pre">build_collate_fn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">build_collate_fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/base.py#L143-L156"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.CommonExample.build_collate_fn" title="Permalink to this definition">#</a></dt>
<dd><p>By default returns <code class="xref py py-obj docutils literal notranslate"><span class="pre">s3prl.dataset.base.default_collate_fn</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>build_collate_fn</strong> (<em>dict</em>) – same in <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.default_config" title="s3prl.problem.common.example.CommonExample.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a>, no argument supported for now</p></li>
<li><p><strong>mode</strong> (<em>str</em>) – train, valid, or test</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>callable</p>
<p>the collate_fn for torch DataLoader in train/valid/test <code class="code docutils literal notranslate"><span class="pre">mode</span></code></p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.CommonExample.build_dataset">
<span class="sig-name descname"><span class="pre">build_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">build_dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_csv</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoder_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frame_shift</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/common/superb_sid.py#L244-L358"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.CommonExample.build_dataset" title="Permalink to this definition">#</a></dt>
<dd><p>Build the dataset for train/valid/test.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>build_dataset</strong> (<em>dict</em>) – <p>same in <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.default_config" title="s3prl.problem.common.example.CommonExample.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a>. with <code class="code docutils literal notranslate"><span class="pre">train</span></code>, <code class="code docutils literal notranslate"><span class="pre">valid</span></code>, <code class="code docutils literal notranslate"><span class="pre">test</span></code> keys, each
is a dictionary with the following supported options:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>key</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>max_secs</p></td>
<td><p>(float) - If a waveform is longer than <code class="code docutils literal notranslate"><span class="pre">max_secs</span></code> seconds, randomly crop the waveform into <code class="code docutils literal notranslate"><span class="pre">max_secs</span></code> seconds</p></td>
</tr>
<tr class="row-odd"><td><p>sox_effects</p></td>
<td><p>(List[List[str]]) - If not None, apply sox effects on the utterance</p></td>
</tr>
</tbody>
</table>
</div>
</p></li>
<li><p><strong>target_dir</strong> (<em>str</em>) – Current experiment directory</p></li>
<li><p><strong>cache_dir</strong> (<em>str</em>) – If the preprocessing takes too long time, you can save
the temporary files into this directory. This directory is expected to be shared
across different training sessions (different hypers and <code class="code docutils literal notranslate"><span class="pre">target_dir</span></code>)</p></li>
<li><p><strong>mode</strong> (<em>str</em>) – train/valid/test</p></li>
<li><p><strong>data_csv</strong> (<em>str</em>) – The metadata csv file for the specific <code class="code docutils literal notranslate"><span class="pre">mode</span></code></p></li>
<li><p><strong>encoder_path</strong> (<em>str</em>) – The pickled encoder path for encoding the labels</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>torch Dataset</p>
<p>For all train/valid/test mode, the dataset should return each item as a dictionary
containing the following keys:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>key</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>x</p></td>
<td><p>(torch.FloatTensor) - the waveform in (seq_len, 1)</p></td>
</tr>
<tr class="row-odd"><td><p>x_len</p></td>
<td><p>(int) - the waveform length <code class="code docutils literal notranslate"><span class="pre">seq_len</span></code></p></td>
</tr>
<tr class="row-even"><td><p>class_id</p></td>
<td><p>(int) - the encoded class id</p></td>
</tr>
<tr class="row-odd"><td><p>label</p></td>
<td><p>(str) - the class name</p></td>
</tr>
<tr class="row-even"><td><p>unique_name</p></td>
<td><p>(str) - the unique id for this datapoint</p></td>
</tr>
</tbody>
</table>
</div>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.CommonExample.build_downstream">
<span class="sig-name descname"><span class="pre">build_downstream</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">build_downstream</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">downstream_input_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">downstream_output_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">downstream_input_stride</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/common/superb_sid.py#L413-L436"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.CommonExample.build_downstream" title="Permalink to this definition">#</a></dt>
<dd><p>Return the task-specific downstream model.
By default build the <code class="xref py py-obj docutils literal notranslate"><span class="pre">MeanPoolingLinear</span></code> model</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>build_downstream</strong> (<em>dict</em>) – same in <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.default_config" title="s3prl.problem.common.example.CommonExample.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a>, support arguments of <code class="xref py py-obj docutils literal notranslate"><span class="pre">MeanPoolingLinear</span></code></p></li>
<li><p><strong>downstream_input_size</strong> (<em>int</em>) – the required input size of the model</p></li>
<li><p><strong>downstream_output_size</strong> (<em>int</em>) – the required output size of the model</p></li>
<li><p><strong>downstream_input_stride</strong> (<em>int</em>) – the input feature’s stride (from 16 KHz)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="s3prl.nn.interface.html#s3prl.nn.interface.AbsUtteranceModel" title="s3prl.nn.interface.AbsUtteranceModel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">s3prl.nn.interface.AbsUtteranceModel</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.CommonExample.build_encoder">
<span class="sig-name descname"><span class="pre">build_encoder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">build_encoder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_csv_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_csv_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_csv_paths</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">get_path_only</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/common/superb_sid.py#L198-L242"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.CommonExample.build_encoder" title="Permalink to this definition">#</a></dt>
<dd><p>Build the encoder (for the labels) given the data metadata, and return the saved encoder path.
By default generate and save a <a class="reference internal" href="s3prl.dataio.encoder.html#s3prl.dataio.encoder.CategoryEncoder" title="s3prl.dataio.encoder.CategoryEncoder"><code class="xref py py-obj docutils literal notranslate"><span class="pre">s3prl.dataio.encoder.CategoryEncoder</span></code></a> from the <code class="code docutils literal notranslate"><span class="pre">label</span></code> column of all the csv files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>build_encoder</strong> (<em>dict</em>) – same in <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.default_config" title="s3prl.problem.common.example.CommonExample.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a>, no argument supported for now</p></li>
<li><p><strong>target_dir</strong> (<em>str</em>) – Save your encoder into this directory</p></li>
<li><p><strong>cache_dir</strong> (<em>str</em>) – If the preprocessing takes too long time, you can save
the temporary files into this directory. This directory is expected to be shared
across different training sessions (different hypers and <code class="code docutils literal notranslate"><span class="pre">target_dir</span></code>)</p></li>
<li><p><strong>train_csv_path</strong> (<em>str</em>) – the train path from <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.prepare_data" title="s3prl.problem.common.example.CommonExample.prepare_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prepare_data</span></code></a></p></li>
<li><p><strong>valid_csv_path</strong> (<em>str</em>) – the valid path from <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.prepare_data" title="s3prl.problem.common.example.CommonExample.prepare_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prepare_data</span></code></a></p></li>
<li><p><strong>test_csv_paths</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – the test paths from <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.prepare_data" title="s3prl.problem.common.example.CommonExample.prepare_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prepare_data</span></code></a></p></li>
<li><p><strong>get_path_only</strong> (<em>str</em>) – Directly return the filepaths no matter they exist or not.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>str</p>
<p>encoder_path: The encoder should be saved in the pickle format</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.CommonExample.build_featurizer">
<span class="sig-name descname"><span class="pre">build_featurizer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">build_featurizer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upstream</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/base.py#L175-L192"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.CommonExample.build_featurizer" title="Permalink to this definition">#</a></dt>
<dd><p>By default build the featurizer with <a class="reference internal" href="s3prl.nn.html#s3prl.nn.Featurizer" title="s3prl.nn.Featurizer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">s3prl.nn.Featurizer</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>build_featurizer</strong> (<em>dict</em>) – same in <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.default_config" title="s3prl.problem.common.example.CommonExample.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a>,
arguments for <a class="reference internal" href="s3prl.nn.html#s3prl.nn.Featurizer" title="s3prl.nn.Featurizer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">s3prl.nn.Featurizer</span></code></a></p></li>
<li><p><strong>upstream</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">AbsUpstream</span></code>) – the upstream model built by <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.build_upstream" title="s3prl.problem.common.example.CommonExample.build_upstream"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_upstream</span></code></a></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p><a class="reference internal" href="s3prl.nn.interface.html#s3prl.nn.interface.AbsFeaturizer" title="s3prl.nn.interface.AbsFeaturizer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">s3prl.nn.interface.AbsFeaturizer</span></code></a></p>
<p>Return the featurizer model. The featurizer is used to reduce the multiple
hidden states returned from the upstream model (built by <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.build_upstream" title="s3prl.problem.common.example.CommonExample.build_upstream"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_upstream</span></code></a>)
into a single hidden state, so can be easliy fed into the downstream model</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.CommonExample.build_model">
<span class="sig-name descname"><span class="pre">build_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">build_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_output_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_upstream</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_featurizer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_downstream</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/base.py#L194-L231"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.CommonExample.build_model" title="Permalink to this definition">#</a></dt>
<dd><p>By default build model with <a class="reference internal" href="s3prl.nn.upstream.html#s3prl.nn.upstream.UpstreamDownstreamModel" title="s3prl.nn.upstream.UpstreamDownstreamModel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">s3prl.nn.upstream.UpstreamDownstreamModel</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>build_model</strong> (<em>dict</em>) – same in <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.default_config" title="s3prl.problem.common.example.CommonExample.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a>,
arguments for <a class="reference internal" href="s3prl.nn.upstream.html#s3prl.nn.upstream.UpstreamDownstreamModel" title="s3prl.nn.upstream.UpstreamDownstreamModel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">s3prl.nn.upstream.UpstreamDownstreamModel</span></code></a></p></li>
<li><p><strong>model_output_size</strong> (<em>int</em>) – the required model’s output hidden size</p></li>
<li><p><strong>build_upstream</strong> (<em>dict</em>) – same in <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.default_config" title="s3prl.problem.common.example.CommonExample.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a>, refer to <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.build_upstream" title="s3prl.problem.common.example.CommonExample.build_upstream"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_upstream</span></code></a></p></li>
<li><p><strong>build_featurizer</strong> (<em>dict</em>) – same in <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.default_config" title="s3prl.problem.common.example.CommonExample.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a>, refer to <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.build_featurizer" title="s3prl.problem.common.example.CommonExample.build_featurizer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_featurizer</span></code></a></p></li>
<li><p><strong>build_downstream</strong> (<em>dict</em>) – same in <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.default_config" title="s3prl.problem.common.example.CommonExample.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a>, refer to <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.build_downstream" title="s3prl.problem.common.example.CommonExample.build_downstream"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_downstream</span></code></a></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>torch.nn.Module</p>
<p>Return the entire model for the task, which takes the direct items from DataLoader as the input.
Usually, the components can be built by <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.build_upstream" title="s3prl.problem.common.example.CommonExample.build_upstream"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_upstream</span></code></a>, <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.build_featurizer" title="s3prl.problem.common.example.CommonExample.build_featurizer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_featurizer</span></code></a>,
<a class="reference internal" href="#s3prl.problem.common.example.CommonExample.build_downstream" title="s3prl.problem.common.example.CommonExample.build_downstream"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_downstream</span></code></a>, and are concated together to get the final model.
The upstream extracts multiple hidden states, the featuizer reduce them into a single hidden state,
and the downstream takes the hidden states as the feature for the downstream-specific model.</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.CommonExample.build_optimizer">
<span class="sig-name descname"><span class="pre">build_optimizer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">build_optimizer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/base.py#L233-L258"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.CommonExample.build_optimizer" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>build_optimizer</strong> (<em>dict</em>) – <p>same in <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.default_config" title="s3prl.problem.common.example.CommonExample.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a>, refer to below</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>key</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>name</p></td>
<td><p>(str) - the optimizer class name in <code class="xref py py-obj docutils literal notranslate"><span class="pre">torch.optim</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>conf</p></td>
<td><p>(dict) - the arguments for initializing the optimizer class. e.g. <code class="code docutils literal notranslate"><span class="pre">{&quot;lr&quot;:</span> <span class="pre">1.0e-4}</span></code></p></td>
</tr>
</tbody>
</table>
</div>
</p></li>
<li><p><strong>parameters</strong> (<em>iterable</em>) – the standard params accepted by <code class="xref py py-obj docutils literal notranslate"><span class="pre">torch.optim.Optimizer</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">torch.optim.Optimizer</span></code></p>
<p>An optimizer following standard torch usage</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.CommonExample.build_scheduler">
<span class="sig-name descname"><span class="pre">build_scheduler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">build_scheduler</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optimizer</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/base.py#L260-L285"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.CommonExample.build_scheduler" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>build_scheduler</strong> (<em>dict</em>) – <p>same in <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.default_config" title="s3prl.problem.common.example.CommonExample.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a></p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>key</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>name</p></td>
<td><p>(str) - the scheduler class name in <code class="xref py py-obj docutils literal notranslate"><span class="pre">torch.optim.lr_scheduler</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>conf</p></td>
<td><p>(dict) - the arguments for initializing the scheduler class. e.g. <code class="code docutils literal notranslate"><span class="pre">{&quot;gamma&quot;:</span> <span class="pre">0.01}</span></code> for <code class="xref py py-obj docutils literal notranslate"><span class="pre">torch.optim.lr_scheduler.StepLR</span></code></p></td>
</tr>
</tbody>
</table>
</div>
</p></li>
<li><p><strong>optimizer</strong> – the standard torch optimizer accepted by Scheduler in <code class="xref py py-obj docutils literal notranslate"><span class="pre">torch.optim.lr_scheduler</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>torch scheduler</p>
<p>A scheduler following standard torch usage</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.CommonExample.build_task">
<span class="sig-name descname"><span class="pre">build_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">build_task</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Module</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DataFrame</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DataFrame</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/common/run.py#L352-L375"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.CommonExample.build_task" title="Permalink to this definition">#</a></dt>
<dd><p>Build the task, which defines the logics for every train/valid/test forward step for the <code class="code docutils literal notranslate"><span class="pre">model</span></code>,
and the logics for how to reduce all the batch results from multiple train/valid/test steps into metrics</p>
<p>By default build <code class="xref py py-obj docutils literal notranslate"><span class="pre">UtteranceClassificationTask</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>build_task</strong> (<em>dict</em>) – same in <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.default_config" title="s3prl.problem.common.example.CommonExample.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a>, no argument supported for now</p></li>
<li><p><strong>model</strong> (<em>torch.nn.Module</em>) – the model built by <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.build_model" title="s3prl.problem.common.example.CommonExample.build_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_model</span></code></a></p></li>
<li><p><strong>encoder</strong> – the encoder built by <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.build_encoder" title="s3prl.problem.common.example.CommonExample.build_encoder"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_encoder</span></code></a></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Task</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.CommonExample.build_upstream">
<span class="sig-name descname"><span class="pre">build_upstream</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">build_upstream</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/base.py#L158-L173"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.CommonExample.build_upstream" title="Permalink to this definition">#</a></dt>
<dd><p>By default build the upstream with <a class="reference internal" href="s3prl.nn.upstream.html#s3prl.nn.upstream.S3PRLUpstream" title="s3prl.nn.upstream.S3PRLUpstream"><code class="xref py py-obj docutils literal notranslate"><span class="pre">s3prl.nn.upstream.S3PRLUpstream</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>build_upstream</strong> (<em>dict</em>) – same in <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.default_config" title="s3prl.problem.common.example.CommonExample.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a>,
arguments for <a class="reference internal" href="s3prl.nn.upstream.html#s3prl.nn.upstream.S3PRLUpstream" title="s3prl.nn.upstream.S3PRLUpstream"><code class="xref py py-obj docutils literal notranslate"><span class="pre">s3prl.nn.upstream.S3PRLUpstream</span></code></a></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p><a class="reference internal" href="s3prl.nn.interface.html#s3prl.nn.interface.AbsUpstream" title="s3prl.nn.interface.AbsUpstream"><code class="xref py py-obj docutils literal notranslate"><span class="pre">s3prl.nn.interface.AbsUpstream</span></code></a></p>
<p>Return an upstream model, whose forward takes the waveform input and returns
multiple hidden states as features.</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.CommonExample.evaluate">
<span class="sig-name descname"><span class="pre">evaluate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">evaluate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_sampler</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collate_fn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eval_batch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dump_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_workers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/base.py#L660-L707"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.CommonExample.evaluate" title="Permalink to this definition">#</a></dt>
<dd><p>The evaluate routine used by <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.train" title="s3prl.problem.common.example.CommonExample.train"><code class="xref py py-obj docutils literal notranslate"><span class="pre">train</span></code></a> (during validation phase) and <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.run" title="s3prl.problem.common.example.CommonExample.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>
(during testing phase).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>evaluate</strong> (<em>dict</em>) – same in <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.default_config" title="s3prl.problem.common.example.CommonExample.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a>, no argument supported for now</p></li>
<li><p><strong>**others</strong> – only meaningful when you want to override this train method, which is not the
common case. Hence we skip the documentation for now.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.CommonExample.get_class_from_name">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_class_from_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/base.py#L129-L141"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.CommonExample.get_class_from_name" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em>) – the <code class="code docutils literal notranslate"><span class="pre">__name__</span></code> of the problem class</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Problem</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.CommonExample.load_model">
<span class="sig-name descname"><span class="pre">load_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_ckpt_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/base.py#L752-L772"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.CommonExample.load_model" title="Permalink to this definition">#</a></dt>
<dd><p>Return the saved model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>model_ckpt_dir</strong> (<em>str</em>) – Restore the model with <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.build_model" title="s3prl.problem.common.example.CommonExample.build_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_model</span></code></a> and the checkpoint
saved in this directory.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">torch.nn.Module</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.CommonExample.load_model_and_task">
<span class="sig-name descname"><span class="pre">load_model_and_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ckpts_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task_overrides</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/base.py#L884-L902"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.CommonExample.load_model_and_task" title="Permalink to this definition">#</a></dt>
<dd><p>This is a helper method to combine <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.load_model" title="s3prl.problem.common.example.CommonExample.load_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_model</span></code></a> and <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.load_task" title="s3prl.problem.common.example.CommonExample.load_task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_task</span></code></a>
together to directly load the model and the task. This method assumes
the model is saved under <code class="code docutils literal notranslate"><span class="pre">ckpts_dir</span> <span class="pre">/</span> <span class="pre">'model'</span></code> and the task is
saved under <code class="code docutils literal notranslate"><span class="pre">ckpts_dir</span> <span class="pre">/</span> <span class="pre">'task'</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><p>tuple</p>
<ol class="arabic simple">
<li><p>model (<code class="xref py py-obj docutils literal notranslate"><span class="pre">torch.nn.Module</span></code>)</p></li>
<li><p>task (<a class="reference internal" href="s3prl.task.html#s3prl.task.Task" title="s3prl.task.Task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">s3prl.task.Task</span></code></a>)</p></li>
</ol>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.CommonExample.load_task">
<span class="sig-name descname"><span class="pre">load_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task_ckpt_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Module</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task_overrides</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/base.py#L833-L882"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.CommonExample.load_task" title="Permalink to this definition">#</a></dt>
<dd><p>Return the saved task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task_ckpt_dir</strong> (<em>str</em>) – Restore the task with <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.build_task" title="s3prl.problem.common.example.CommonExample.build_task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_task</span></code></a> and the checkpoint
saved in this directory.</p></li>
<li><p><strong>model</strong> (<em>torch.nn.Module</em>) – the model for the task, since the model is separately saved
and is required for <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.build_task" title="s3prl.problem.common.example.CommonExample.build_task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_task</span></code></a>.</p></li>
<li><p><strong>task_overrides</strong> (<em>dict</em>) – overrides the saved initialization arguments, so can change
the loaded task’s behavior. Like, change the decoding hyperparameters.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="s3prl.task.html#s3prl.task.Task" title="s3prl.task.Task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">s3prl.task.Task</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.CommonExample.main">
<span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/base.py#L954-L995"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.CommonExample.main" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.CommonExample.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_all_cache</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_workers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eval_batch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'cuda'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">world_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_ckpt_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prepare_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_encoder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_batch_sampler</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_collate_fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_upstream</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_featurizer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_downstream</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_task</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_optimizer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_scheduler</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_task</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evaluate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/common/run.py#L26-L318"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.CommonExample.run" title="Permalink to this definition">#</a></dt>
<dd><div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>stage</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>Parse the corpus and save the metadata file (waveform path, label…)</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Build the encoder to encode the labels</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>Train the model</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>Evaluate the model on multiple test sets</p></td>
</tr>
</tbody>
</table>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target_dir</strong> (<em>str</em>) – The directory that stores the script result.</p></li>
<li><p><strong>cache_dir</strong> (<em>str</em>) – The directory that caches the processed data.
Default: /home/user/.cache/s3prl/data</p></li>
<li><p><strong>remove_all_cache</strong> (<em>bool</em>) – Whether to remove all the cache stored under <cite>cache_dir</cite>.
Default: False</p></li>
<li><p><strong>start</strong> (<em>int</em>) – The starting stage of the problem script.
Default: 0</p></li>
<li><p><strong>stop</strong> (<em>int</em>) – The stoping stage of the problem script, set <cite>None</cite> to reach the final stage.
Default: None</p></li>
<li><p><strong>num_workers</strong> (<em>int</em>) – num_workers for all the torch DataLoder</p></li>
<li><p><strong>eval_batch</strong> (<em>int</em>) – During evaluation (valid or test), limit the number of batch.
This is helpful for the fast development to check everything won’t crash.
If is -1, disable this feature and evaluate the entire epoch.
Default: -1</p></li>
<li><p><strong>device</strong> (<em>str</em>) – The device type for all torch-related operation: “cpu” or “cuda”
Default: “cuda”</p></li>
<li><p><strong>world_size</strong> (<em>int</em>) – How many processes are running this script simultaneously (in parallel).
Usually this is just 1, however if you are runnig distributed training,
this should be &gt; 1.
Default: 1</p></li>
<li><p><strong>rank</strong> (<em>int</em>) – When distributed training, world_size &gt; 1. Take <code class="code docutils literal notranslate"><span class="pre">world_size</span> <span class="pre">==</span> <span class="pre">8</span></code> for
example, this means 8 processes (8 GPUs) are runing in parallel. The script
needs to know which process among 8 processes it is. In this case, <code class="code docutils literal notranslate"><span class="pre">rank</span></code>
can range from 0~7. All the 8 processes have the same <code class="code docutils literal notranslate"><span class="pre">world_size</span></code> but
different <code class="code docutils literal notranslate"><span class="pre">rank</span></code> (process id).</p></li>
<li><p><strong>test_ckpt_dir</strong> (<em>str</em>) – Specify the checkpoint path for testing. If not, use the validation best
checkpoint under the given <code class="code docutils literal notranslate"><span class="pre">target_dir</span></code> directory.</p></li>
<li><p><strong>**kwds</strong> – The other arguments like <code class="code docutils literal notranslate"><span class="pre">prepare_data</span></code> and <code class="code docutils literal notranslate"><span class="pre">build_model</span></code> are
method specific-arguments for methods like <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.prepare_data" title="s3prl.problem.common.example.CommonExample.prepare_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prepare_data</span></code></a> and
<a class="reference internal" href="#s3prl.problem.common.example.CommonExample.build_model" title="s3prl.problem.common.example.CommonExample.build_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_model</span></code></a>, and will not be used in the core <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.run" title="s3prl.problem.common.example.CommonExample.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a> logic.
See the specific method documentation for their supported arguments and
meaning</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.CommonExample.save_model">
<span class="sig-name descname"><span class="pre">save_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">save_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_ckpt_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_model_all_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Module</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/base.py#L709-L750"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.CommonExample.save_model" title="Permalink to this definition">#</a></dt>
<dd><p>Save the model state_dict and the model initialization arguments into the given directory.
If you override this method, it is highly possible you also need to override <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.load_model" title="s3prl.problem.common.example.CommonExample.load_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_model</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>save_model</strong> (<em>dict</em>) – same in <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.default_config" title="s3prl.problem.common.example.CommonExample.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a>, so the user can save additional settings,
like the configuration of the dataset by duplicating the dataset hypers
inside the <code class="code docutils literal notranslate"><span class="pre">save_model</span></code> field. You can rely on the <code class="code docutils literal notranslate"><span class="pre">omegaconf</span></code>
package to simplify the duplication.</p></li>
<li><p><strong>model_ckpt_dir</strong> (<em>str</em>) – save the model into the this directory.</p></li>
<li><p><strong>build_model_all_args</strong> (<em>dict</em>) – all the arguments of <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.build_model" title="s3prl.problem.common.example.CommonExample.build_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_model</span></code></a>.
By saving this dictionary, you can easily reconstruct the same model
by calling <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.build_model" title="s3prl.problem.common.example.CommonExample.build_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_model</span></code></a> with the saved dictionary.</p></li>
<li><p><strong>model</strong> (<em>torch.nn.Module</em>) – the model to be saved.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.CommonExample.save_task">
<span class="sig-name descname"><span class="pre">save_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">save_task</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task_ckpt_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_task_all_args_except_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="s3prl.task.base.html#s3prl.task.base.Task" title="s3prl.task.base.Task"><span class="pre">Task</span></a></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/base.py#L774-L831"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.CommonExample.save_task" title="Permalink to this definition">#</a></dt>
<dd><p>Save the task’s state, <code class="code docutils literal notranslate"><span class="pre">task.get_state()</span></code>, and the initialization arguments into the given
directory. If you override this method, it is highly possible you also need to override
<a class="reference internal" href="#s3prl.problem.common.example.CommonExample.load_task" title="s3prl.problem.common.example.CommonExample.load_task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_task</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>save_task</strong> (<em>dict</em>) – same in <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.default_config" title="s3prl.problem.common.example.CommonExample.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a>, so the user can save additional settings,
like the configuration of the dataset by duplicating the dataset hypers
inside the <code class="code docutils literal notranslate"><span class="pre">save_task</span></code> field. You can rely on the <code class="code docutils literal notranslate"><span class="pre">omegaconf</span></code>
package to simplify the duplication.</p></li>
<li><p><strong>task_ckpt_dir</strong> (<em>str</em>) – save the task into this directory.</p></li>
<li><p><strong>build_task_all_args_except_model</strong> (<em>dict</em>) – all the arguments of <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.build_task" title="s3prl.problem.common.example.CommonExample.build_task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_task</span></code></a> except
the <code class="code docutils literal notranslate"><span class="pre">model</span></code> argument since the model should be sapartely saved by
<a class="reference internal" href="#s3prl.problem.common.example.CommonExample.save_model" title="s3prl.problem.common.example.CommonExample.save_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">save_model</span></code></a>. By saving this dictionary, you can easily reconstruct the same task
by calling <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.build_task" title="s3prl.problem.common.example.CommonExample.build_task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_task</span></code></a> with the saved dictionary.</p></li>
<li><p><strong>task</strong> (<a class="reference internal" href="s3prl.task.html#s3prl.task.Task" title="s3prl.task.Task"><em>Task</em></a>) – the task to be saved.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.CommonExample.train">
<span class="sig-name descname"><span class="pre">train</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">train</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_model_all_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_task_all_args_except_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_task</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_optimizer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_scheduler</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evaluate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_batch_sampler</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_collate_fn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_batch_sampler</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_collate_fn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_workers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">world_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eval_batch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">global_config</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/base.py#L287-L658"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.CommonExample.train" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>train</strong> (<em>dict</em>) – <p>same in <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.default_config" title="s3prl.problem.common.example.CommonExample.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a></p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>key</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>total_steps</p></td>
<td><p>(int) - the total optimization steps</p></td>
</tr>
<tr class="row-odd"><td><p>log_step</p></td>
<td><p>(int) - logging frequency. log every <code class="code docutils literal notranslate"><span class="pre">log_step</span></code> step</p></td>
</tr>
<tr class="row-even"><td><p>eval_step</p></td>
<td><p>(int) - evaluation frequency. Evaluate every <code class="code docutils literal notranslate"><span class="pre">eval_step</span></code> step.                                                 Note that you can control how many batch to evaluate to speed up the                                                 development by the <code class="code docutils literal notranslate"><span class="pre">eval_batch</span></code> argument in <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.run" title="s3prl.problem.common.example.CommonExample.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p>save_step</p></td>
<td><p>(int) - save the checkpoint every <code class="code docutils literal notranslate"><span class="pre">save_step</span></code> step.</p></td>
</tr>
<tr class="row-even"><td><p>gradient_clipping</p></td>
<td><p>(float) - clip the gradient. important for RNNs.</p></td>
</tr>
<tr class="row-odd"><td><p>gradient_accumulate</p></td>
<td><p>(int) - accumulate multiple steps’ gradient before updating network parameters                                                 to simulate large-batch optimization.</p></td>
</tr>
<tr class="row-even"><td><p>valid_metric</p></td>
<td><p>(str) - the metric to select the best valid checkpoint. Different Tasks have different                                                 supported valid_metrics. See <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.build_task" title="s3prl.problem.common.example.CommonExample.build_task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_task</span></code></a> for the supported metrics.</p></td>
</tr>
<tr class="row-odd"><td><p>valid_higher_better</p></td>
<td><p>(bool) - some metrics are higher better, while some are lower better                                                 this will affect how to save the best validation checkpoint.</p></td>
</tr>
<tr class="row-even"><td><p>auto_resume</p></td>
<td><p>(bool) - if there are already the last checkpoint in <code class="code docutils literal notranslate"><span class="pre">target_dir</span></code> (see <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.run" title="s3prl.problem.common.example.CommonExample.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>),                                                 whether to resume from it or delete it and start a new training session.</p></td>
</tr>
<tr class="row-odd"><td><p>resume_ckpt_dir</p></td>
<td><p>(str) - you can directly specify the checkpoint path to resume which is not necessary                                                 in <code class="code docutils literal notranslate"><span class="pre">target_dir</span></code> (see <a class="reference internal" href="#s3prl.problem.common.example.CommonExample.run" title="s3prl.problem.common.example.CommonExample.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>).</p></td>
</tr>
<tr class="row-even"><td><p>seed</p></td>
<td><p>(int) - fix the seed before the training start</p></td>
</tr>
<tr class="row-odd"><td><p>keep_num_ckpts</p></td>
<td><p>(int) - to prevent saving too many checkpoints, only save the <code class="code docutils literal notranslate"><span class="pre">keep_num_ckpts</span></code>                                                 latest checkpoints and delete the old ones.</p></td>
</tr>
<tr class="row-even"><td><p>use_scheduler</p></td>
<td><p>(bool) - whether to use the scheduler</p></td>
</tr>
</tbody>
</table>
</div>
</p></li>
<li><p><strong>**others</strong> – only meaningful when you want to override this train method, which is not the
common case. Hence we skip the documentation for now.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="path">
<h2>Path<a class="headerlink" href="#path" title="Permalink to this heading">#</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">s3prl.problem.common.example.</span></span><span class="sig-name descname"><span class="pre">Path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L826-L1412"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">PurePath</span></code></p>
<p>PurePath subclass that can make system calls.</p>
<p>Path represents a filesystem path but unlike PurePath, also offers
methods to do system calls on path objects. Depending on your system,
instantiating a Path will return either a PosixPath or a WindowsPath
object. You can also instantiate a PosixPath or WindowsPath directly,
but cannot instantiate a WindowsPath on a POSIX system or vice versa.</p>
<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.stat">
<span class="sig-name descname"><span class="pre">stat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">follow_symlinks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.stat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L837-L842"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.stat" title="Permalink to this definition">#</a></dt>
<dd><p>Return the result of the stat() system call on this path, like
os.stat() does.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.lstat">
<span class="sig-name descname"><span class="pre">lstat</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.lstat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L844-L849"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.lstat" title="Permalink to this definition">#</a></dt>
<dd><p>Like stat(), except if the path points to a symlink, the symlink’s
status information is returned, rather than its target’s.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.exists">
<span class="sig-name descname"><span class="pre">exists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">follow_symlinks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.exists"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L854-L870"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.exists" title="Permalink to this definition">#</a></dt>
<dd><p>Whether this path exists.</p>
<p>This method normally follows symlinks; to check whether a symlink exists,
add the argument follow_symlinks=False.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.is_dir">
<span class="sig-name descname"><span class="pre">is_dir</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.is_dir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L872-L886"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.is_dir" title="Permalink to this definition">#</a></dt>
<dd><p>Whether this path is a directory.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.is_file">
<span class="sig-name descname"><span class="pre">is_file</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.is_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L888-L903"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.is_file" title="Permalink to this definition">#</a></dt>
<dd><p>Whether this path is a regular file (also True for symlinks pointing
to regular files).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.is_mount">
<span class="sig-name descname"><span class="pre">is_mount</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.is_mount"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L905-L909"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.is_mount" title="Permalink to this definition">#</a></dt>
<dd><p>Check if this path is a mount point</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.is_symlink">
<span class="sig-name descname"><span class="pre">is_symlink</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.is_symlink"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L911-L924"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.is_symlink" title="Permalink to this definition">#</a></dt>
<dd><p>Whether this path is a symbolic link.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.is_junction">
<span class="sig-name descname"><span class="pre">is_junction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.is_junction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L926-L930"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.is_junction" title="Permalink to this definition">#</a></dt>
<dd><p>Whether this path is a junction.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.is_block_device">
<span class="sig-name descname"><span class="pre">is_block_device</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.is_block_device"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L932-L946"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.is_block_device" title="Permalink to this definition">#</a></dt>
<dd><p>Whether this path is a block device.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.is_char_device">
<span class="sig-name descname"><span class="pre">is_char_device</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.is_char_device"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L948-L962"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.is_char_device" title="Permalink to this definition">#</a></dt>
<dd><p>Whether this path is a character device.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.is_fifo">
<span class="sig-name descname"><span class="pre">is_fifo</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.is_fifo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L964-L978"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.is_fifo" title="Permalink to this definition">#</a></dt>
<dd><p>Whether this path is a FIFO.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.is_socket">
<span class="sig-name descname"><span class="pre">is_socket</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.is_socket"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L980-L994"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.is_socket" title="Permalink to this definition">#</a></dt>
<dd><p>Whether this path is a socket.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.samefile">
<span class="sig-name descname"><span class="pre">samefile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.samefile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L996-L1005"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.samefile" title="Permalink to this definition">#</a></dt>
<dd><p>Return whether other_path is the same or not as this file
(as returned by os.path.samefile()).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.open">
<span class="sig-name descname"><span class="pre">open</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'r'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffering</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">errors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">newline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.open"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L1007-L1015"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.open" title="Permalink to this definition">#</a></dt>
<dd><p>Open the file pointed by this path and return a file object, as
the built-in open() function does.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.read_bytes">
<span class="sig-name descname"><span class="pre">read_bytes</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.read_bytes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L1017-L1022"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.read_bytes" title="Permalink to this definition">#</a></dt>
<dd><p>Open the file in bytes mode, read it, and close the file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.read_text">
<span class="sig-name descname"><span class="pre">read_text</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">errors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.read_text"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L1024-L1030"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.read_text" title="Permalink to this definition">#</a></dt>
<dd><p>Open the file in text mode, read it, and close the file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.write_bytes">
<span class="sig-name descname"><span class="pre">write_bytes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.write_bytes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L1032-L1039"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.write_bytes" title="Permalink to this definition">#</a></dt>
<dd><p>Open the file in bytes mode, write to it, and close the file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.write_text">
<span class="sig-name descname"><span class="pre">write_text</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">errors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">newline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.write_text"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L1041-L1050"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.write_text" title="Permalink to this definition">#</a></dt>
<dd><p>Open the file in text mode, write to it, and close the file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.iterdir">
<span class="sig-name descname"><span class="pre">iterdir</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.iterdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L1052-L1059"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.iterdir" title="Permalink to this definition">#</a></dt>
<dd><p>Yield path objects of the directory contents.</p>
<p>The children are yielded in arbitrary order, and the
special entries ‘.’ and ‘..’ are not included.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.glob">
<span class="sig-name descname"><span class="pre">glob</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pattern</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">case_sensitive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.glob"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L1083-L1097"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.glob" title="Permalink to this definition">#</a></dt>
<dd><p>Iterate over this subtree and yield all existing files (of any
kind, including directories) matching the given relative pattern.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.rglob">
<span class="sig-name descname"><span class="pre">rglob</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pattern</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">case_sensitive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.rglob"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L1099-L1112"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.rglob" title="Permalink to this definition">#</a></dt>
<dd><p>Recursively yield all existing files (of any kind, including
directories) matching the given relative pattern, anywhere in
this subtree.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.walk">
<span class="sig-name descname"><span class="pre">walk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">top_down</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">on_error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">follow_symlinks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.walk"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L1114-L1157"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.walk" title="Permalink to this definition">#</a></dt>
<dd><p>Walk the directory tree from this directory, similar to os.walk().</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.cwd">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cwd</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.cwd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L1190-L1197"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.cwd" title="Permalink to this definition">#</a></dt>
<dd><p>Return a new path pointing to the current working directory.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.home">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">home</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.home"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L1199-L1204"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.home" title="Permalink to this definition">#</a></dt>
<dd><p>Return a new path pointing to the user’s home directory (as
returned by os.path.expanduser(‘~’)).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.absolute">
<span class="sig-name descname"><span class="pre">absolute</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.absolute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L1206-L1228"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.absolute" title="Permalink to this definition">#</a></dt>
<dd><p>Return an absolute version of this path by prepending the current
working directory. No normalization or symlink resolution is performed.</p>
<p>Use resolve() to get the canonical path to a file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.resolve">
<span class="sig-name descname"><span class="pre">resolve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.resolve"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L1230-L1255"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.resolve" title="Permalink to this definition">#</a></dt>
<dd><p>Make the path absolute, resolving all symlinks on the way and also
normalizing it.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.owner">
<span class="sig-name descname"><span class="pre">owner</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.owner"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L1257-L1265"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.owner" title="Permalink to this definition">#</a></dt>
<dd><p>Return the login name of the file owner.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.group">
<span class="sig-name descname"><span class="pre">group</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.group"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L1267-L1276"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.group" title="Permalink to this definition">#</a></dt>
<dd><p>Return the group name of the file gid.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.readlink">
<span class="sig-name descname"><span class="pre">readlink</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.readlink"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L1278-L1284"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.readlink" title="Permalink to this definition">#</a></dt>
<dd><p>Return the path to which the symbolic link points.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.touch">
<span class="sig-name descname"><span class="pre">touch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">438</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exist_ok</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.touch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L1286-L1306"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.touch" title="Permalink to this definition">#</a></dt>
<dd><p>Create this file with the given access mode, if it doesn’t exist.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.mkdir">
<span class="sig-name descname"><span class="pre">mkdir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">511</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parents</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exist_ok</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.mkdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L1308-L1323"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.mkdir" title="Permalink to this definition">#</a></dt>
<dd><p>Create a new directory at this given path.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.chmod">
<span class="sig-name descname"><span class="pre">chmod</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">follow_symlinks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.chmod"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L1325-L1329"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.chmod" title="Permalink to this definition">#</a></dt>
<dd><p>Change the permissions of the path, like os.chmod().</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.lchmod">
<span class="sig-name descname"><span class="pre">lchmod</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.lchmod"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L1331-L1336"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.lchmod" title="Permalink to this definition">#</a></dt>
<dd><p>Like chmod(), except if the path points to a symlink, the symlink’s
permissions are changed, rather than its target’s.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.unlink">
<span class="sig-name descname"><span class="pre">unlink</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">missing_ok</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.unlink"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L1338-L1347"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.unlink" title="Permalink to this definition">#</a></dt>
<dd><p>Remove this file or link.
If the path is a directory, use rmdir() instead.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.rmdir">
<span class="sig-name descname"><span class="pre">rmdir</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.rmdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L1349-L1353"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.rmdir" title="Permalink to this definition">#</a></dt>
<dd><p>Remove this directory.  The directory must be empty.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.rename">
<span class="sig-name descname"><span class="pre">rename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.rename"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L1355-L1366"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.rename" title="Permalink to this definition">#</a></dt>
<dd><p>Rename this path to the target path.</p>
<p>The target path may be absolute or relative. Relative paths are
interpreted relative to the current working directory, <em>not</em> the
directory of the Path object.</p>
<p>Returns the new Path instance pointing to the target path.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.replace">
<span class="sig-name descname"><span class="pre">replace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.replace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L1368-L1379"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.replace" title="Permalink to this definition">#</a></dt>
<dd><p>Rename this path to the target path, overwriting if that path exists.</p>
<p>The target path may be absolute or relative. Relative paths are
interpreted relative to the current working directory, <em>not</em> the
directory of the Path object.</p>
<p>Returns the new Path instance pointing to the target path.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.symlink_to">
<span class="sig-name descname"><span class="pre">symlink_to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_is_directory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.symlink_to"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L1381-L1388"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.symlink_to" title="Permalink to this definition">#</a></dt>
<dd><p>Make this path a symlink pointing to the target path.
Note the order of arguments (link, target) is the reverse of os.symlink.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.hardlink_to">
<span class="sig-name descname"><span class="pre">hardlink_to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.hardlink_to"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L1390-L1398"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.hardlink_to" title="Permalink to this definition">#</a></dt>
<dd><p>Make this path a hard link pointing to the same file as <em>target</em>.</p>
<p>Note the order of arguments (self, target) is the reverse of os.link’s.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.expanduser">
<span class="sig-name descname"><span class="pre">expanduser</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pathlib.html#Path.expanduser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L1400-L1412"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.expanduser" title="Permalink to this definition">#</a></dt>
<dd><p>Return a new path with expanded ~ and ~user constructs
(as returned by os.path.expanduser)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.anchor">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">anchor</span></span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/common/example.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.anchor" title="Permalink to this definition">#</a></dt>
<dd><p>The concatenation of the drive and root, or ‘’.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.as_posix">
<span class="sig-name descname"><span class="pre">as_posix</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L450-L454"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.as_posix" title="Permalink to this definition">#</a></dt>
<dd><p>Return the string representation of the path with forward (/)
slashes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.as_uri">
<span class="sig-name descname"><span class="pre">as_uri</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L464-L482"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.as_uri" title="Permalink to this definition">#</a></dt>
<dd><p>Return the path as a ‘file’ URI.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.drive">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">drive</span></span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/common/example.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.drive" title="Permalink to this definition">#</a></dt>
<dd><p>The drive prefix (letter or UNC path), if any.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.is_absolute">
<span class="sig-name descname"><span class="pre">is_absolute</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L748-L762"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.is_absolute" title="Permalink to this definition">#</a></dt>
<dd><p>True if the path is absolute (has both a root and, if applicable,
a drive).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.is_relative_to">
<span class="sig-name descname"><span class="pre">is_relative_to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">_deprecated</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L690-L700"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.is_relative_to" title="Permalink to this definition">#</a></dt>
<dd><p>Return True if the path is relative to another path or False.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.is_reserved">
<span class="sig-name descname"><span class="pre">is_reserved</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L764-L778"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.is_reserved" title="Permalink to this definition">#</a></dt>
<dd><p>Return True if the path contains one of the special names reserved
by the system, if any.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.joinpath">
<span class="sig-name descname"><span class="pre">joinpath</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">pathsegments</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L711-L717"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.joinpath" title="Permalink to this definition">#</a></dt>
<dd><p>Combine this path with one or several arguments, and return a
new path representing either a subpath (if all arguments are relative
paths) or a totally different path (if one of the arguments is
anchored).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.match">
<span class="sig-name descname"><span class="pre">match</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path_pattern</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">case_sensitive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L780-L794"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.match" title="Permalink to this definition">#</a></dt>
<dd><p>Return True if this path matches the given pattern.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">name</span></span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/common/example.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.name" title="Permalink to this definition">#</a></dt>
<dd><p>The final path component, if any.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.parent">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parent</span></span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/common/example.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.parent" title="Permalink to this definition">#</a></dt>
<dd><p>The logical parent of the path.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.parents">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parents</span></span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/common/example.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.parents" title="Permalink to this definition">#</a></dt>
<dd><p>A sequence of this path’s logical parents.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.parts">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parts</span></span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/common/example.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.parts" title="Permalink to this definition">#</a></dt>
<dd><p>An object providing sequence-like access to the
components in the filesystem path.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.relative_to">
<span class="sig-name descname"><span class="pre">relative_to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">_deprecated</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">walk_up</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L663-L688"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.relative_to" title="Permalink to this definition">#</a></dt>
<dd><p>Return the relative path to another path identified by the passed
arguments.  If the operation is not possible (because this is not
related to the other path), raise ValueError.</p>
<p>The <em>walk_up</em> parameter controls whether <cite>..</cite> may be used to resolve
the path.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.root">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">root</span></span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/common/example.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.root" title="Permalink to this definition">#</a></dt>
<dd><p>The root of the path, if any.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.stem">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">stem</span></span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/common/example.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.stem" title="Permalink to this definition">#</a></dt>
<dd><p>The final path component, minus its last suffix.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.suffix">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">suffix</span></span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/common/example.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.suffix" title="Permalink to this definition">#</a></dt>
<dd><p>The final component’s last suffix, if any.</p>
<p>This includes the leading period. For example: ‘.txt’</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.suffixes">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">suffixes</span></span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/common/example.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.suffixes" title="Permalink to this definition">#</a></dt>
<dd><p>A list of the final component’s suffixes, if any.</p>
<p>These include the leading periods. For example: [‘.tar’, ‘.gz’]</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.with_name">
<span class="sig-name descname"><span class="pre">with_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L628-L636"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.with_name" title="Permalink to this definition">#</a></dt>
<dd><p>Return a new path with the file name changed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.with_segments">
<span class="sig-name descname"><span class="pre">with_segments</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">pathsegments</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L380-L385"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.with_segments" title="Permalink to this definition">#</a></dt>
<dd><p>Construct a new path object from any number of path-like objects.
Subclasses may override this method to customize how new path objects
are created from methods like <cite>iterdir()</cite>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.with_stem">
<span class="sig-name descname"><span class="pre">with_stem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stem</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L638-L640"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.with_stem" title="Permalink to this definition">#</a></dt>
<dd><p>Return a new path with the stem changed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.Path.with_suffix">
<span class="sig-name descname"><span class="pre">with_suffix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">suffix</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 ///usr/lib/python3.12/pathlib.py#L642-L661"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.Path.with_suffix" title="Permalink to this definition">#</a></dt>
<dd><p>Return a new path with the file suffix changed.  If the path
has no suffix, add given suffix.  If the given suffix is an empty
string, remove the suffix from the path.</p>
</dd></dl>

</dd></dl>

</section>
<section id="superbsid">
<h2>SuperbSID<a class="headerlink" href="#superbsid" title="Permalink to this heading">#</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="s3prl.problem.common.example.SuperbSID">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">s3prl.problem.common.example.</span></span><span class="sig-name descname"><span class="pre">SuperbSID</span></span><a class="reference internal" href="../_modules/s3prl/problem/common/superb_sid.html#SuperbSID"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/common/superb_sid.py#L82-L436"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.SuperbSID" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="s3prl.problem.common.run.html#s3prl.problem.common.run.Common" title="s3prl.problem.common.run.Common"><code class="xref py py-class docutils literal notranslate"><span class="pre">Common</span></code></a></p>
<p>The standard SUPERB SID task</p>
<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.SuperbSID.default_config">
<span class="sig-name descname"><span class="pre">default_config</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../_modules/s3prl/problem/common/superb_sid.html#SuperbSID.default_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/common/superb_sid.py#L87-L154"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.SuperbSID.default_config" title="Permalink to this definition">#</a></dt>
<dd><p>The default arguments for <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.run" title="s3prl.problem.common.example.SuperbSID.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a> in yaml.
Note that for the fields with inner values, like <code class="code docutils literal notranslate"><span class="pre">build_model</span></code>,
the outer field name corresponds to a method name, so you can find the method
<a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.build_model" title="s3prl.problem.common.example.SuperbSID.build_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_model</span></code></a>. Furthermore, the values inside that field will be
directly passed into the method. So by changing these inner values, you
can directly affect the behavior of the corresponding method. See the method
documentation for all the supported arguments and their meanings.</p>
<p>The methods affected by the following config are: <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.prepare_data" title="s3prl.problem.common.example.SuperbSID.prepare_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prepare_data</span></code></a> <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.build_encoder" title="s3prl.problem.common.example.SuperbSID.build_encoder"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_encoder</span></code></a> <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.build_dataset" title="s3prl.problem.common.example.SuperbSID.build_dataset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_dataset</span></code></a> <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.build_batch_sampler" title="s3prl.problem.common.example.SuperbSID.build_batch_sampler"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_batch_sampler</span></code></a> <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.build_upstream" title="s3prl.problem.common.example.SuperbSID.build_upstream"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_upstream</span></code></a> <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.build_featurizer" title="s3prl.problem.common.example.SuperbSID.build_featurizer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_featurizer</span></code></a> <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.build_downstream" title="s3prl.problem.common.example.SuperbSID.build_downstream"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_downstream</span></code></a> <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.build_model" title="s3prl.problem.common.example.SuperbSID.build_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_model</span></code></a> <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.build_task" title="s3prl.problem.common.example.SuperbSID.build_task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_task</span></code></a> <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.build_optimizer" title="s3prl.problem.common.example.SuperbSID.build_optimizer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_optimizer</span></code></a> <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.build_scheduler" title="s3prl.problem.common.example.SuperbSID.build_scheduler"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_scheduler</span></code></a> <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.save_model" title="s3prl.problem.common.example.SuperbSID.save_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">save_model</span></code></a> <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.save_task" title="s3prl.problem.common.example.SuperbSID.save_task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">save_task</span></code></a> <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.train" title="s3prl.problem.common.example.SuperbSID.train"><code class="xref py py-obj docutils literal notranslate"><span class="pre">train</span></code></a> <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.evaluate" title="s3prl.problem.common.example.SuperbSID.evaluate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">evaluate</span></code></a></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">start</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="nt">stop</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="nt">target_dir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">???</span>
<span class="nt">cache_dir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="nt">remove_all_cache</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">prepare_data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">dataset_root</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">???</span>
<span class="nt">build_encoder</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="nt">build_dataset</span><span class="p">:</span>
<span class="w">  </span><span class="nt">train</span><span class="p">:</span>
<span class="w">    </span><span class="nt">max_secs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8.0</span>
<span class="nt">build_batch_sampler</span><span class="p">:</span>
<span class="w">  </span><span class="nt">train</span><span class="p">:</span>
<span class="w">    </span><span class="nt">batch_size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8</span>
<span class="w">    </span><span class="nt">shuffle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">valid</span><span class="p">:</span>
<span class="w">    </span><span class="nt">batch_size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="nt">test</span><span class="p">:</span>
<span class="w">    </span><span class="nt">batch_size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="nt">build_upstream</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">???</span>
<span class="nt">build_featurizer</span><span class="p">:</span>
<span class="w">  </span><span class="nt">layer_selections</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">normalize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">build_downstream</span><span class="p">:</span>
<span class="w">  </span><span class="nt">hidden_size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">256</span>
<span class="nt">build_model</span><span class="p">:</span>
<span class="w">  </span><span class="nt">upstream_trainable</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">build_task</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="nt">build_optimizer</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Adam</span>
<span class="w">  </span><span class="nt">conf</span><span class="p">:</span>
<span class="w">    </span><span class="nt">lr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0001</span>
<span class="nt">build_scheduler</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ExponentialLR</span>
<span class="w">  </span><span class="nt">gamma</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.9</span>
<span class="nt">save_model</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="nt">save_task</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="nt">train</span><span class="p">:</span>
<span class="w">  </span><span class="nt">total_steps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">200000</span>
<span class="w">  </span><span class="nt">log_step</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">500</span>
<span class="w">  </span><span class="nt">eval_step</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5000</span>
<span class="w">  </span><span class="nt">save_step</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000</span>
<span class="w">  </span><span class="nt">gradient_clipping</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
<span class="w">  </span><span class="nt">gradient_accumulate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<span class="w">  </span><span class="nt">valid_metric</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">accuracy</span>
<span class="w">  </span><span class="nt">valid_higher_better</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">auto_resume</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">resume_ckpt_dir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="nt">evaluate</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.SuperbSID.prepare_data">
<span class="sig-name descname"><span class="pre">prepare_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prepare_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">get_path_only</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/s3prl/problem/common/superb_sid.html#SuperbSID.prepare_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/common/superb_sid.py#L156-L196"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.SuperbSID.prepare_data" title="Permalink to this definition">#</a></dt>
<dd><p>Prepare the task-specific data metadata (path, labels…).
By default call <code class="xref py py-obj docutils literal notranslate"><span class="pre">voxceleb1_for_sid</span></code> with <code class="code docutils literal notranslate"><span class="pre">**prepare_data</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prepare_data</strong> (<em>dict</em>) – same in <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.default_config" title="s3prl.problem.common.example.SuperbSID.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a>, support arguments in <code class="xref py py-obj docutils literal notranslate"><span class="pre">voxceleb1_for_sid</span></code></p></li>
<li><p><strong>target_dir</strong> (<em>str</em>) – Parse your corpus and save the csv file into this directory</p></li>
<li><p><strong>cache_dir</strong> (<em>str</em>) – If the parsing or preprocessing takes too long time, you can save
the temporary files into this directory. This directory is expected to be shared
across different training sessions (different hypers and <code class="code docutils literal notranslate"><span class="pre">target_dir</span></code>)</p></li>
<li><p><strong>get_path_only</strong> (<em>str</em>) – Directly return the filepaths no matter they exist or not.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>tuple</p>
<ol class="arabic simple">
<li><p>train_path (str)</p></li>
<li><p>valid_path (str)</p></li>
<li><p>test_paths (List[str])</p></li>
</ol>
<p>Each path (str) should be a csv file containing the following columns:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>column</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>id</p></td>
<td><p>(str) - the unique id for this data point</p></td>
</tr>
<tr class="row-odd"><td><p>wav_path</p></td>
<td><p>(str) - the absolute path of the waveform file</p></td>
</tr>
<tr class="row-even"><td><p>label</p></td>
<td><p>(str) - a string label of the waveform</p></td>
</tr>
<tr class="row-odd"><td><p>start_sec</p></td>
<td><p>(float) - optional, load the waveform from <code class="code docutils literal notranslate"><span class="pre">start_sec</span></code> seconds. If not presented or is <code class="code docutils literal notranslate"><span class="pre">math.nan</span></code>, load from the beginning.</p></td>
</tr>
<tr class="row-even"><td><p>end_sec</p></td>
<td><p>(float) - optional, load the waveform from <code class="code docutils literal notranslate"><span class="pre">end_sec</span></code> seconds. If not presented or is <code class="code docutils literal notranslate"><span class="pre">math.nan</span></code>, load to the end.</p></td>
</tr>
</tbody>
</table>
</div>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.SuperbSID.build_encoder">
<span class="sig-name descname"><span class="pre">build_encoder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">build_encoder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_csv_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_csv_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_csv_paths</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">get_path_only</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/s3prl/problem/common/superb_sid.html#SuperbSID.build_encoder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/common/superb_sid.py#L198-L242"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.SuperbSID.build_encoder" title="Permalink to this definition">#</a></dt>
<dd><p>Build the encoder (for the labels) given the data metadata, and return the saved encoder path.
By default generate and save a <a class="reference internal" href="s3prl.dataio.encoder.html#s3prl.dataio.encoder.CategoryEncoder" title="s3prl.dataio.encoder.CategoryEncoder"><code class="xref py py-obj docutils literal notranslate"><span class="pre">s3prl.dataio.encoder.CategoryEncoder</span></code></a> from the <code class="code docutils literal notranslate"><span class="pre">label</span></code> column of all the csv files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>build_encoder</strong> (<em>dict</em>) – same in <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.default_config" title="s3prl.problem.common.example.SuperbSID.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a>, no argument supported for now</p></li>
<li><p><strong>target_dir</strong> (<em>str</em>) – Save your encoder into this directory</p></li>
<li><p><strong>cache_dir</strong> (<em>str</em>) – If the preprocessing takes too long time, you can save
the temporary files into this directory. This directory is expected to be shared
across different training sessions (different hypers and <code class="code docutils literal notranslate"><span class="pre">target_dir</span></code>)</p></li>
<li><p><strong>train_csv_path</strong> (<em>str</em>) – the train path from <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.prepare_data" title="s3prl.problem.common.example.SuperbSID.prepare_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prepare_data</span></code></a></p></li>
<li><p><strong>valid_csv_path</strong> (<em>str</em>) – the valid path from <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.prepare_data" title="s3prl.problem.common.example.SuperbSID.prepare_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prepare_data</span></code></a></p></li>
<li><p><strong>test_csv_paths</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – the test paths from <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.prepare_data" title="s3prl.problem.common.example.SuperbSID.prepare_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prepare_data</span></code></a></p></li>
<li><p><strong>get_path_only</strong> (<em>str</em>) – Directly return the filepaths no matter they exist or not.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>str</p>
<p>encoder_path: The encoder should be saved in the pickle format</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.SuperbSID.build_dataset">
<span class="sig-name descname"><span class="pre">build_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">build_dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_csv</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoder_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frame_shift</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/s3prl/problem/common/superb_sid.html#SuperbSID.build_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/common/superb_sid.py#L244-L358"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.SuperbSID.build_dataset" title="Permalink to this definition">#</a></dt>
<dd><p>Build the dataset for train/valid/test.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>build_dataset</strong> (<em>dict</em>) – <p>same in <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.default_config" title="s3prl.problem.common.example.SuperbSID.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a>. with <code class="code docutils literal notranslate"><span class="pre">train</span></code>, <code class="code docutils literal notranslate"><span class="pre">valid</span></code>, <code class="code docutils literal notranslate"><span class="pre">test</span></code> keys, each
is a dictionary with the following supported options:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>key</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>max_secs</p></td>
<td><p>(float) - If a waveform is longer than <code class="code docutils literal notranslate"><span class="pre">max_secs</span></code> seconds, randomly crop the waveform into <code class="code docutils literal notranslate"><span class="pre">max_secs</span></code> seconds</p></td>
</tr>
<tr class="row-odd"><td><p>sox_effects</p></td>
<td><p>(List[List[str]]) - If not None, apply sox effects on the utterance</p></td>
</tr>
</tbody>
</table>
</div>
</p></li>
<li><p><strong>target_dir</strong> (<em>str</em>) – Current experiment directory</p></li>
<li><p><strong>cache_dir</strong> (<em>str</em>) – If the preprocessing takes too long time, you can save
the temporary files into this directory. This directory is expected to be shared
across different training sessions (different hypers and <code class="code docutils literal notranslate"><span class="pre">target_dir</span></code>)</p></li>
<li><p><strong>mode</strong> (<em>str</em>) – train/valid/test</p></li>
<li><p><strong>data_csv</strong> (<em>str</em>) – The metadata csv file for the specific <code class="code docutils literal notranslate"><span class="pre">mode</span></code></p></li>
<li><p><strong>encoder_path</strong> (<em>str</em>) – The pickled encoder path for encoding the labels</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>torch Dataset</p>
<p>For all train/valid/test mode, the dataset should return each item as a dictionary
containing the following keys:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>key</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>x</p></td>
<td><p>(torch.FloatTensor) - the waveform in (seq_len, 1)</p></td>
</tr>
<tr class="row-odd"><td><p>x_len</p></td>
<td><p>(int) - the waveform length <code class="code docutils literal notranslate"><span class="pre">seq_len</span></code></p></td>
</tr>
<tr class="row-even"><td><p>class_id</p></td>
<td><p>(int) - the encoded class id</p></td>
</tr>
<tr class="row-odd"><td><p>label</p></td>
<td><p>(str) - the class name</p></td>
</tr>
<tr class="row-even"><td><p>unique_name</p></td>
<td><p>(str) - the unique id for this datapoint</p></td>
</tr>
</tbody>
</table>
</div>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.SuperbSID.build_batch_sampler">
<span class="sig-name descname"><span class="pre">build_batch_sampler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">build_batch_sampler</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_csv</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/s3prl/problem/common/superb_sid.html#SuperbSID.build_batch_sampler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/common/superb_sid.py#L360-L411"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.SuperbSID.build_batch_sampler" title="Permalink to this definition">#</a></dt>
<dd><p>Return the batch sampler for torch DataLoader.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>build_batch_sampler</strong> (<em>dict</em>) – <p>same in <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.default_config" title="s3prl.problem.common.example.SuperbSID.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a></p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>key</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>train</p></td>
<td><p>(dict) - arguments for <code class="xref py py-obj docutils literal notranslate"><span class="pre">FixedBatchSizeBatchSampler</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>valid</p></td>
<td><p>(dict) - arguments for <code class="xref py py-obj docutils literal notranslate"><span class="pre">FixedBatchSizeBatchSampler</span></code></p></td>
</tr>
<tr class="row-even"><td><p>test</p></td>
<td><p>(dict) - arguments for <code class="xref py py-obj docutils literal notranslate"><span class="pre">FixedBatchSizeBatchSampler</span></code></p></td>
</tr>
</tbody>
</table>
</div>
</p></li>
<li><p><strong>target_dir</strong> (<em>str</em>) – Current experiment directory</p></li>
<li><p><strong>cache_dir</strong> (<em>str</em>) – If the preprocessing takes too long time, save
the temporary files into this directory. This directory is expected to be shared
across different training sessions (different hypers and <code class="code docutils literal notranslate"><span class="pre">target_dir</span></code>)</p></li>
<li><p><strong>mode</strong> (<em>str</em>) – train/valid/test</p></li>
<li><p><strong>data_csv</strong> (<em>str</em>) – the <code class="code docutils literal notranslate"><span class="pre">mode</span></code> specific csv from <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.prepare_data" title="s3prl.problem.common.example.SuperbSID.prepare_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prepare_data</span></code></a></p></li>
<li><p><strong>dataset</strong> – the dataset from <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.build_dataset" title="s3prl.problem.common.example.SuperbSID.build_dataset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_dataset</span></code></a></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>batch sampler for torch DataLoader</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.SuperbSID.build_downstream">
<span class="sig-name descname"><span class="pre">build_downstream</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">build_downstream</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">downstream_input_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">downstream_output_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">downstream_input_stride</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/s3prl/problem/common/superb_sid.html#SuperbSID.build_downstream"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/common/superb_sid.py#L413-L436"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.SuperbSID.build_downstream" title="Permalink to this definition">#</a></dt>
<dd><p>Return the task-specific downstream model.
By default build the <code class="xref py py-obj docutils literal notranslate"><span class="pre">MeanPoolingLinear</span></code> model</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>build_downstream</strong> (<em>dict</em>) – same in <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.default_config" title="s3prl.problem.common.example.SuperbSID.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a>, support arguments of <code class="xref py py-obj docutils literal notranslate"><span class="pre">MeanPoolingLinear</span></code></p></li>
<li><p><strong>downstream_input_size</strong> (<em>int</em>) – the required input size of the model</p></li>
<li><p><strong>downstream_output_size</strong> (<em>int</em>) – the required output size of the model</p></li>
<li><p><strong>downstream_input_stride</strong> (<em>int</em>) – the input feature’s stride (from 16 KHz)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="s3prl.nn.interface.html#s3prl.nn.interface.AbsUtteranceModel" title="s3prl.nn.interface.AbsUtteranceModel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">s3prl.nn.interface.AbsUtteranceModel</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.SuperbSID.build_collate_fn">
<span class="sig-name descname"><span class="pre">build_collate_fn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">build_collate_fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/base.py#L143-L156"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.SuperbSID.build_collate_fn" title="Permalink to this definition">#</a></dt>
<dd><p>By default returns <code class="xref py py-obj docutils literal notranslate"><span class="pre">s3prl.dataset.base.default_collate_fn</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>build_collate_fn</strong> (<em>dict</em>) – same in <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.default_config" title="s3prl.problem.common.example.SuperbSID.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a>, no argument supported for now</p></li>
<li><p><strong>mode</strong> (<em>str</em>) – train, valid, or test</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>callable</p>
<p>the collate_fn for torch DataLoader in train/valid/test <code class="code docutils literal notranslate"><span class="pre">mode</span></code></p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.SuperbSID.build_featurizer">
<span class="sig-name descname"><span class="pre">build_featurizer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">build_featurizer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upstream</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/base.py#L175-L192"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.SuperbSID.build_featurizer" title="Permalink to this definition">#</a></dt>
<dd><p>By default build the featurizer with <a class="reference internal" href="s3prl.nn.html#s3prl.nn.Featurizer" title="s3prl.nn.Featurizer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">s3prl.nn.Featurizer</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>build_featurizer</strong> (<em>dict</em>) – same in <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.default_config" title="s3prl.problem.common.example.SuperbSID.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a>,
arguments for <a class="reference internal" href="s3prl.nn.html#s3prl.nn.Featurizer" title="s3prl.nn.Featurizer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">s3prl.nn.Featurizer</span></code></a></p></li>
<li><p><strong>upstream</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">AbsUpstream</span></code>) – the upstream model built by <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.build_upstream" title="s3prl.problem.common.example.SuperbSID.build_upstream"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_upstream</span></code></a></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p><a class="reference internal" href="s3prl.nn.interface.html#s3prl.nn.interface.AbsFeaturizer" title="s3prl.nn.interface.AbsFeaturizer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">s3prl.nn.interface.AbsFeaturizer</span></code></a></p>
<p>Return the featurizer model. The featurizer is used to reduce the multiple
hidden states returned from the upstream model (built by <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.build_upstream" title="s3prl.problem.common.example.SuperbSID.build_upstream"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_upstream</span></code></a>)
into a single hidden state, so can be easliy fed into the downstream model</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.SuperbSID.build_model">
<span class="sig-name descname"><span class="pre">build_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">build_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_output_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_upstream</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_featurizer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_downstream</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/base.py#L194-L231"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.SuperbSID.build_model" title="Permalink to this definition">#</a></dt>
<dd><p>By default build model with <a class="reference internal" href="s3prl.nn.upstream.html#s3prl.nn.upstream.UpstreamDownstreamModel" title="s3prl.nn.upstream.UpstreamDownstreamModel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">s3prl.nn.upstream.UpstreamDownstreamModel</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>build_model</strong> (<em>dict</em>) – same in <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.default_config" title="s3prl.problem.common.example.SuperbSID.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a>,
arguments for <a class="reference internal" href="s3prl.nn.upstream.html#s3prl.nn.upstream.UpstreamDownstreamModel" title="s3prl.nn.upstream.UpstreamDownstreamModel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">s3prl.nn.upstream.UpstreamDownstreamModel</span></code></a></p></li>
<li><p><strong>model_output_size</strong> (<em>int</em>) – the required model’s output hidden size</p></li>
<li><p><strong>build_upstream</strong> (<em>dict</em>) – same in <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.default_config" title="s3prl.problem.common.example.SuperbSID.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a>, refer to <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.build_upstream" title="s3prl.problem.common.example.SuperbSID.build_upstream"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_upstream</span></code></a></p></li>
<li><p><strong>build_featurizer</strong> (<em>dict</em>) – same in <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.default_config" title="s3prl.problem.common.example.SuperbSID.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a>, refer to <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.build_featurizer" title="s3prl.problem.common.example.SuperbSID.build_featurizer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_featurizer</span></code></a></p></li>
<li><p><strong>build_downstream</strong> (<em>dict</em>) – same in <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.default_config" title="s3prl.problem.common.example.SuperbSID.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a>, refer to <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.build_downstream" title="s3prl.problem.common.example.SuperbSID.build_downstream"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_downstream</span></code></a></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>torch.nn.Module</p>
<p>Return the entire model for the task, which takes the direct items from DataLoader as the input.
Usually, the components can be built by <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.build_upstream" title="s3prl.problem.common.example.SuperbSID.build_upstream"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_upstream</span></code></a>, <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.build_featurizer" title="s3prl.problem.common.example.SuperbSID.build_featurizer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_featurizer</span></code></a>,
<a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.build_downstream" title="s3prl.problem.common.example.SuperbSID.build_downstream"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_downstream</span></code></a>, and are concated together to get the final model.
The upstream extracts multiple hidden states, the featuizer reduce them into a single hidden state,
and the downstream takes the hidden states as the feature for the downstream-specific model.</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.SuperbSID.build_optimizer">
<span class="sig-name descname"><span class="pre">build_optimizer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">build_optimizer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/base.py#L233-L258"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.SuperbSID.build_optimizer" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>build_optimizer</strong> (<em>dict</em>) – <p>same in <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.default_config" title="s3prl.problem.common.example.SuperbSID.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a>, refer to below</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>key</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>name</p></td>
<td><p>(str) - the optimizer class name in <code class="xref py py-obj docutils literal notranslate"><span class="pre">torch.optim</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>conf</p></td>
<td><p>(dict) - the arguments for initializing the optimizer class. e.g. <code class="code docutils literal notranslate"><span class="pre">{&quot;lr&quot;:</span> <span class="pre">1.0e-4}</span></code></p></td>
</tr>
</tbody>
</table>
</div>
</p></li>
<li><p><strong>parameters</strong> (<em>iterable</em>) – the standard params accepted by <code class="xref py py-obj docutils literal notranslate"><span class="pre">torch.optim.Optimizer</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">torch.optim.Optimizer</span></code></p>
<p>An optimizer following standard torch usage</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.SuperbSID.build_scheduler">
<span class="sig-name descname"><span class="pre">build_scheduler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">build_scheduler</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optimizer</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/base.py#L260-L285"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.SuperbSID.build_scheduler" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>build_scheduler</strong> (<em>dict</em>) – <p>same in <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.default_config" title="s3prl.problem.common.example.SuperbSID.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a></p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>key</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>name</p></td>
<td><p>(str) - the scheduler class name in <code class="xref py py-obj docutils literal notranslate"><span class="pre">torch.optim.lr_scheduler</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>conf</p></td>
<td><p>(dict) - the arguments for initializing the scheduler class. e.g. <code class="code docutils literal notranslate"><span class="pre">{&quot;gamma&quot;:</span> <span class="pre">0.01}</span></code> for <code class="xref py py-obj docutils literal notranslate"><span class="pre">torch.optim.lr_scheduler.StepLR</span></code></p></td>
</tr>
</tbody>
</table>
</div>
</p></li>
<li><p><strong>optimizer</strong> – the standard torch optimizer accepted by Scheduler in <code class="xref py py-obj docutils literal notranslate"><span class="pre">torch.optim.lr_scheduler</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>torch scheduler</p>
<p>A scheduler following standard torch usage</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.SuperbSID.build_task">
<span class="sig-name descname"><span class="pre">build_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">build_task</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Module</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DataFrame</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DataFrame</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/common/run.py#L352-L375"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.SuperbSID.build_task" title="Permalink to this definition">#</a></dt>
<dd><p>Build the task, which defines the logics for every train/valid/test forward step for the <code class="code docutils literal notranslate"><span class="pre">model</span></code>,
and the logics for how to reduce all the batch results from multiple train/valid/test steps into metrics</p>
<p>By default build <code class="xref py py-obj docutils literal notranslate"><span class="pre">UtteranceClassificationTask</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>build_task</strong> (<em>dict</em>) – same in <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.default_config" title="s3prl.problem.common.example.SuperbSID.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a>, no argument supported for now</p></li>
<li><p><strong>model</strong> (<em>torch.nn.Module</em>) – the model built by <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.build_model" title="s3prl.problem.common.example.SuperbSID.build_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_model</span></code></a></p></li>
<li><p><strong>encoder</strong> – the encoder built by <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.build_encoder" title="s3prl.problem.common.example.SuperbSID.build_encoder"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_encoder</span></code></a></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Task</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.SuperbSID.build_upstream">
<span class="sig-name descname"><span class="pre">build_upstream</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">build_upstream</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/base.py#L158-L173"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.SuperbSID.build_upstream" title="Permalink to this definition">#</a></dt>
<dd><p>By default build the upstream with <a class="reference internal" href="s3prl.nn.upstream.html#s3prl.nn.upstream.S3PRLUpstream" title="s3prl.nn.upstream.S3PRLUpstream"><code class="xref py py-obj docutils literal notranslate"><span class="pre">s3prl.nn.upstream.S3PRLUpstream</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>build_upstream</strong> (<em>dict</em>) – same in <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.default_config" title="s3prl.problem.common.example.SuperbSID.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a>,
arguments for <a class="reference internal" href="s3prl.nn.upstream.html#s3prl.nn.upstream.S3PRLUpstream" title="s3prl.nn.upstream.S3PRLUpstream"><code class="xref py py-obj docutils literal notranslate"><span class="pre">s3prl.nn.upstream.S3PRLUpstream</span></code></a></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p><a class="reference internal" href="s3prl.nn.interface.html#s3prl.nn.interface.AbsUpstream" title="s3prl.nn.interface.AbsUpstream"><code class="xref py py-obj docutils literal notranslate"><span class="pre">s3prl.nn.interface.AbsUpstream</span></code></a></p>
<p>Return an upstream model, whose forward takes the waveform input and returns
multiple hidden states as features.</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.SuperbSID.evaluate">
<span class="sig-name descname"><span class="pre">evaluate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">evaluate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_sampler</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collate_fn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eval_batch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dump_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_workers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/base.py#L660-L707"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.SuperbSID.evaluate" title="Permalink to this definition">#</a></dt>
<dd><p>The evaluate routine used by <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.train" title="s3prl.problem.common.example.SuperbSID.train"><code class="xref py py-obj docutils literal notranslate"><span class="pre">train</span></code></a> (during validation phase) and <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.run" title="s3prl.problem.common.example.SuperbSID.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>
(during testing phase).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>evaluate</strong> (<em>dict</em>) – same in <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.default_config" title="s3prl.problem.common.example.SuperbSID.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a>, no argument supported for now</p></li>
<li><p><strong>**others</strong> – only meaningful when you want to override this train method, which is not the
common case. Hence we skip the documentation for now.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.SuperbSID.get_class_from_name">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_class_from_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/base.py#L129-L141"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.SuperbSID.get_class_from_name" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em>) – the <code class="code docutils literal notranslate"><span class="pre">__name__</span></code> of the problem class</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Problem</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.SuperbSID.load_model">
<span class="sig-name descname"><span class="pre">load_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_ckpt_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/base.py#L752-L772"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.SuperbSID.load_model" title="Permalink to this definition">#</a></dt>
<dd><p>Return the saved model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>model_ckpt_dir</strong> (<em>str</em>) – Restore the model with <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.build_model" title="s3prl.problem.common.example.SuperbSID.build_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_model</span></code></a> and the checkpoint
saved in this directory.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">torch.nn.Module</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.SuperbSID.load_model_and_task">
<span class="sig-name descname"><span class="pre">load_model_and_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ckpts_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task_overrides</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/base.py#L884-L902"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.SuperbSID.load_model_and_task" title="Permalink to this definition">#</a></dt>
<dd><p>This is a helper method to combine <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.load_model" title="s3prl.problem.common.example.SuperbSID.load_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_model</span></code></a> and <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.load_task" title="s3prl.problem.common.example.SuperbSID.load_task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_task</span></code></a>
together to directly load the model and the task. This method assumes
the model is saved under <code class="code docutils literal notranslate"><span class="pre">ckpts_dir</span> <span class="pre">/</span> <span class="pre">'model'</span></code> and the task is
saved under <code class="code docutils literal notranslate"><span class="pre">ckpts_dir</span> <span class="pre">/</span> <span class="pre">'task'</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><p>tuple</p>
<ol class="arabic simple">
<li><p>model (<code class="xref py py-obj docutils literal notranslate"><span class="pre">torch.nn.Module</span></code>)</p></li>
<li><p>task (<a class="reference internal" href="s3prl.task.html#s3prl.task.Task" title="s3prl.task.Task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">s3prl.task.Task</span></code></a>)</p></li>
</ol>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.SuperbSID.load_task">
<span class="sig-name descname"><span class="pre">load_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task_ckpt_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Module</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task_overrides</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/base.py#L833-L882"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.SuperbSID.load_task" title="Permalink to this definition">#</a></dt>
<dd><p>Return the saved task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task_ckpt_dir</strong> (<em>str</em>) – Restore the task with <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.build_task" title="s3prl.problem.common.example.SuperbSID.build_task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_task</span></code></a> and the checkpoint
saved in this directory.</p></li>
<li><p><strong>model</strong> (<em>torch.nn.Module</em>) – the model for the task, since the model is separately saved
and is required for <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.build_task" title="s3prl.problem.common.example.SuperbSID.build_task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_task</span></code></a>.</p></li>
<li><p><strong>task_overrides</strong> (<em>dict</em>) – overrides the saved initialization arguments, so can change
the loaded task’s behavior. Like, change the decoding hyperparameters.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="s3prl.task.html#s3prl.task.Task" title="s3prl.task.Task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">s3prl.task.Task</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.SuperbSID.main">
<span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/base.py#L954-L995"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.SuperbSID.main" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.SuperbSID.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_all_cache</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_workers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eval_batch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'cuda'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">world_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_ckpt_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prepare_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_encoder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_batch_sampler</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_collate_fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_upstream</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_featurizer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_downstream</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_task</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_optimizer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_scheduler</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_task</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evaluate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/common/run.py#L26-L318"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.SuperbSID.run" title="Permalink to this definition">#</a></dt>
<dd><div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>stage</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>Parse the corpus and save the metadata file (waveform path, label…)</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Build the encoder to encode the labels</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>Train the model</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>Evaluate the model on multiple test sets</p></td>
</tr>
</tbody>
</table>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target_dir</strong> (<em>str</em>) – The directory that stores the script result.</p></li>
<li><p><strong>cache_dir</strong> (<em>str</em>) – The directory that caches the processed data.
Default: /home/user/.cache/s3prl/data</p></li>
<li><p><strong>remove_all_cache</strong> (<em>bool</em>) – Whether to remove all the cache stored under <cite>cache_dir</cite>.
Default: False</p></li>
<li><p><strong>start</strong> (<em>int</em>) – The starting stage of the problem script.
Default: 0</p></li>
<li><p><strong>stop</strong> (<em>int</em>) – The stoping stage of the problem script, set <cite>None</cite> to reach the final stage.
Default: None</p></li>
<li><p><strong>num_workers</strong> (<em>int</em>) – num_workers for all the torch DataLoder</p></li>
<li><p><strong>eval_batch</strong> (<em>int</em>) – During evaluation (valid or test), limit the number of batch.
This is helpful for the fast development to check everything won’t crash.
If is -1, disable this feature and evaluate the entire epoch.
Default: -1</p></li>
<li><p><strong>device</strong> (<em>str</em>) – The device type for all torch-related operation: “cpu” or “cuda”
Default: “cuda”</p></li>
<li><p><strong>world_size</strong> (<em>int</em>) – How many processes are running this script simultaneously (in parallel).
Usually this is just 1, however if you are runnig distributed training,
this should be &gt; 1.
Default: 1</p></li>
<li><p><strong>rank</strong> (<em>int</em>) – When distributed training, world_size &gt; 1. Take <code class="code docutils literal notranslate"><span class="pre">world_size</span> <span class="pre">==</span> <span class="pre">8</span></code> for
example, this means 8 processes (8 GPUs) are runing in parallel. The script
needs to know which process among 8 processes it is. In this case, <code class="code docutils literal notranslate"><span class="pre">rank</span></code>
can range from 0~7. All the 8 processes have the same <code class="code docutils literal notranslate"><span class="pre">world_size</span></code> but
different <code class="code docutils literal notranslate"><span class="pre">rank</span></code> (process id).</p></li>
<li><p><strong>test_ckpt_dir</strong> (<em>str</em>) – Specify the checkpoint path for testing. If not, use the validation best
checkpoint under the given <code class="code docutils literal notranslate"><span class="pre">target_dir</span></code> directory.</p></li>
<li><p><strong>**kwds</strong> – The other arguments like <code class="code docutils literal notranslate"><span class="pre">prepare_data</span></code> and <code class="code docutils literal notranslate"><span class="pre">build_model</span></code> are
method specific-arguments for methods like <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.prepare_data" title="s3prl.problem.common.example.SuperbSID.prepare_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prepare_data</span></code></a> and
<a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.build_model" title="s3prl.problem.common.example.SuperbSID.build_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_model</span></code></a>, and will not be used in the core <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.run" title="s3prl.problem.common.example.SuperbSID.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a> logic.
See the specific method documentation for their supported arguments and
meaning</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.SuperbSID.save_model">
<span class="sig-name descname"><span class="pre">save_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">save_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_ckpt_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_model_all_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Module</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/base.py#L709-L750"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.SuperbSID.save_model" title="Permalink to this definition">#</a></dt>
<dd><p>Save the model state_dict and the model initialization arguments into the given directory.
If you override this method, it is highly possible you also need to override <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.load_model" title="s3prl.problem.common.example.SuperbSID.load_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_model</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>save_model</strong> (<em>dict</em>) – same in <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.default_config" title="s3prl.problem.common.example.SuperbSID.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a>, so the user can save additional settings,
like the configuration of the dataset by duplicating the dataset hypers
inside the <code class="code docutils literal notranslate"><span class="pre">save_model</span></code> field. You can rely on the <code class="code docutils literal notranslate"><span class="pre">omegaconf</span></code>
package to simplify the duplication.</p></li>
<li><p><strong>model_ckpt_dir</strong> (<em>str</em>) – save the model into the this directory.</p></li>
<li><p><strong>build_model_all_args</strong> (<em>dict</em>) – all the arguments of <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.build_model" title="s3prl.problem.common.example.SuperbSID.build_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_model</span></code></a>.
By saving this dictionary, you can easily reconstruct the same model
by calling <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.build_model" title="s3prl.problem.common.example.SuperbSID.build_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_model</span></code></a> with the saved dictionary.</p></li>
<li><p><strong>model</strong> (<em>torch.nn.Module</em>) – the model to be saved.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.SuperbSID.save_task">
<span class="sig-name descname"><span class="pre">save_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">save_task</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task_ckpt_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_task_all_args_except_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="s3prl.task.base.html#s3prl.task.base.Task" title="s3prl.task.base.Task"><span class="pre">Task</span></a></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/base.py#L774-L831"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.SuperbSID.save_task" title="Permalink to this definition">#</a></dt>
<dd><p>Save the task’s state, <code class="code docutils literal notranslate"><span class="pre">task.get_state()</span></code>, and the initialization arguments into the given
directory. If you override this method, it is highly possible you also need to override
<a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.load_task" title="s3prl.problem.common.example.SuperbSID.load_task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_task</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>save_task</strong> (<em>dict</em>) – same in <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.default_config" title="s3prl.problem.common.example.SuperbSID.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a>, so the user can save additional settings,
like the configuration of the dataset by duplicating the dataset hypers
inside the <code class="code docutils literal notranslate"><span class="pre">save_task</span></code> field. You can rely on the <code class="code docutils literal notranslate"><span class="pre">omegaconf</span></code>
package to simplify the duplication.</p></li>
<li><p><strong>task_ckpt_dir</strong> (<em>str</em>) – save the task into this directory.</p></li>
<li><p><strong>build_task_all_args_except_model</strong> (<em>dict</em>) – all the arguments of <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.build_task" title="s3prl.problem.common.example.SuperbSID.build_task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_task</span></code></a> except
the <code class="code docutils literal notranslate"><span class="pre">model</span></code> argument since the model should be sapartely saved by
<a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.save_model" title="s3prl.problem.common.example.SuperbSID.save_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">save_model</span></code></a>. By saving this dictionary, you can easily reconstruct the same task
by calling <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.build_task" title="s3prl.problem.common.example.SuperbSID.build_task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_task</span></code></a> with the saved dictionary.</p></li>
<li><p><strong>task</strong> (<a class="reference internal" href="s3prl.task.html#s3prl.task.Task" title="s3prl.task.Task"><em>Task</em></a>) – the task to be saved.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="s3prl.problem.common.example.SuperbSID.train">
<span class="sig-name descname"><span class="pre">train</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">train</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_model_all_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_task_all_args_except_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_task</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_optimizer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_scheduler</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evaluate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_batch_sampler</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_collate_fn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_batch_sampler</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_collate_fn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_workers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">world_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eval_batch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">global_config</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/s3prl/s3prl/blob/v0.4.18 /s3prl/problem/base.py#L287-L658"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#s3prl.problem.common.example.SuperbSID.train" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>train</strong> (<em>dict</em>) – <p>same in <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.default_config" title="s3prl.problem.common.example.SuperbSID.default_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">default_config</span></code></a></p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>key</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>total_steps</p></td>
<td><p>(int) - the total optimization steps</p></td>
</tr>
<tr class="row-odd"><td><p>log_step</p></td>
<td><p>(int) - logging frequency. log every <code class="code docutils literal notranslate"><span class="pre">log_step</span></code> step</p></td>
</tr>
<tr class="row-even"><td><p>eval_step</p></td>
<td><p>(int) - evaluation frequency. Evaluate every <code class="code docutils literal notranslate"><span class="pre">eval_step</span></code> step.                                                 Note that you can control how many batch to evaluate to speed up the                                                 development by the <code class="code docutils literal notranslate"><span class="pre">eval_batch</span></code> argument in <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.run" title="s3prl.problem.common.example.SuperbSID.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p>save_step</p></td>
<td><p>(int) - save the checkpoint every <code class="code docutils literal notranslate"><span class="pre">save_step</span></code> step.</p></td>
</tr>
<tr class="row-even"><td><p>gradient_clipping</p></td>
<td><p>(float) - clip the gradient. important for RNNs.</p></td>
</tr>
<tr class="row-odd"><td><p>gradient_accumulate</p></td>
<td><p>(int) - accumulate multiple steps’ gradient before updating network parameters                                                 to simulate large-batch optimization.</p></td>
</tr>
<tr class="row-even"><td><p>valid_metric</p></td>
<td><p>(str) - the metric to select the best valid checkpoint. Different Tasks have different                                                 supported valid_metrics. See <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.build_task" title="s3prl.problem.common.example.SuperbSID.build_task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_task</span></code></a> for the supported metrics.</p></td>
</tr>
<tr class="row-odd"><td><p>valid_higher_better</p></td>
<td><p>(bool) - some metrics are higher better, while some are lower better                                                 this will affect how to save the best validation checkpoint.</p></td>
</tr>
<tr class="row-even"><td><p>auto_resume</p></td>
<td><p>(bool) - if there are already the last checkpoint in <code class="code docutils literal notranslate"><span class="pre">target_dir</span></code> (see <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.run" title="s3prl.problem.common.example.SuperbSID.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>),                                                 whether to resume from it or delete it and start a new training session.</p></td>
</tr>
<tr class="row-odd"><td><p>resume_ckpt_dir</p></td>
<td><p>(str) - you can directly specify the checkpoint path to resume which is not necessary                                                 in <code class="code docutils literal notranslate"><span class="pre">target_dir</span></code> (see <a class="reference internal" href="#s3prl.problem.common.example.SuperbSID.run" title="s3prl.problem.common.example.SuperbSID.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>).</p></td>
</tr>
<tr class="row-even"><td><p>seed</p></td>
<td><p>(int) - fix the seed before the training start</p></td>
</tr>
<tr class="row-odd"><td><p>keep_num_ckpts</p></td>
<td><p>(int) - to prevent saving too many checkpoints, only save the <code class="code docutils literal notranslate"><span class="pre">keep_num_ckpts</span></code>                                                 latest checkpoints and delete the old ones.</p></td>
</tr>
<tr class="row-even"><td><p>use_scheduler</p></td>
<td><p>(bool) - whether to use the scheduler</p></td>
</tr>
</tbody>
</table>
</div>
</p></li>
<li><p><strong>**others</strong> – only meaningful when you want to override this train method, which is not the
common case. Hence we skip the documentation for now.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="s3prl.problem.common.hear_beijing_opera.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">hear_beijing_opera</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="s3prl.problem.common.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">common</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, S3PRL Team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">example</a><ul>
<li><a class="reference internal" href="#commonexample">CommonExample</a></li>
<li><a class="reference internal" href="#path">Path</a></li>
<li><a class="reference internal" href="#superbsid">SuperbSID</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    <script src="../_static/js/custom.js"></script>
    </body>
</html>